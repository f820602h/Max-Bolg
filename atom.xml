<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Max&#39;s Blog</title>
  
  <subtitle>Max Your Mind</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://maxleebk.com/"/>
  <updated>2021-09-20T21:55:45.145Z</updated>
  <id>https://maxleebk.com/</id>
  
  <author>
    <name>Max Lee</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>資視就是力量 - Highcharts / 尾聲</title>
    <link href="https://maxleebk.com/2020/10/14/highcharts-30/"/>
    <id>https://maxleebk.com/2020/10/14/highcharts-30/</id>
    <published>2020-10-14T05:20:00.000Z</published>
    <updated>2021-09-20T21:55:45.145Z</updated>
    
    <content type="html"><![CDATA[<p>終於，花了一個月的時間，我們從零開始認識 Highcharts 到現在已經能夠配合 Vue.js 一同運用，希望這次的系列文章能幫助到各位，如果內容與實際使用上有出入也歡迎大家幫忙指正，那今天的章節就讓我花點時間說說自己的參賽感言吧。</p><hr><h2 id="選題動機"><a href="#選題動機" class="headerlink" title="選題動機"></a>選題動機</h2><br/><p>其實我自己也是個很 ju 的前端 junior，以往也從未使用過任何相關的 library，會接觸到 Highcharts 純粹是因為工作上剛好接到了個報表呈現的專案，而且技術選用也是由前輩決定的，所以完全是「被學習」 Highcharts。</p><p>不過好在 Highcharts 真的蠻容易上手的，花了不到半天的時間就可以畫出一個完整性很高的圖表，但為了讓產品的功能更豐富，在將近半年的開發時間中，PM 總是有許多天馬行空的想法，有些功能總感覺可以做到，卻因為屬性太多不知從何下手，Google 後大部分也都是英文討論串，大大增加了我這個英文苦手的開發時間。</p><p>所以也是因為自己經歷了這些學習過程，才希望可以透過參加鐵人賽的機會來試著記錄我這半年來累積的經驗，或多或少可以幫助想要接觸 Highcharts 的朋友。</p><br/><img src="learning.png" style="max-width: 400px; margin: 16px auto 0;" /><hr><h2 id="參賽心得"><a href="#參賽心得" class="headerlink" title="參賽心得"></a>參賽心得</h2><br/><p>這次是第一次參加鐵人賽，也因為自己的心態是寧可不參加也不要未完賽，所以剛開始很是猶豫要不要參賽，對於要連續寫三十篇文章實在沒什麼信心，一路猶豫到了九月初才下定決心，堅持每天至少寫一篇文章，不知不覺就在開賽前夕累積了十篇左右。</p><p>而後來也才發現，其實最困難的是「下定決心」的那一刻，後面反而是習慣成自然，下班到家就是會自動打開電腦完成文章。</p><p>另外收穫最大的是，自己為了讓文章內容更豐富，所以花了很多時間在研究每個屬性的特性並且撰寫範例，過程中其實也領悟了很多先前沒有察覺的做法或技巧，所以自己在這次參賽中也算是有所成長吧。</p><img src="write.png" style="max-width: 400px; margin: 16px auto 0;" /><blockquote><p>本次系列文章中的所有範例列表：<a href="https://codepen.io/max-lee/pens/public" target="_blank" rel="noopener">https://codepen.io/max-lee/pens/public</a></p></blockquote><hr><h2 id="未來期許"><a href="#未來期許" class="headerlink" title="未來期許"></a>未來期許</h2><br/><p>其實 Highcharts 不只有這次系列文章中介紹的基本圖表，還有很多特殊種類、3D圖表等等，甚至還有股票專用的 Highcharts Stock、繪製甘特圖的 Highcharts Gantt 以及繪製地圖的 Highcharts Maps，這些延伸模組目前也都在學習摸索中，也希望自己可以在熟悉了之後二次參賽並向大家介紹。</p><p><img src="map.png" alt=""></p><br/><p>那最後也要非常感謝各位願意花時間閱讀我的文章，希望對大家有所幫助，未來有機會的話也期待再次於鐵人賽中和大家相見。</p><blockquote><p>所有系列文章也同步發表於個人部落格：<a href="https://maxleebk.com/">https://maxleebk.com/</a></p></blockquote><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10253136" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;終於，花了一個月的時間，我們從零開始認識 Highcharts 到現在已經能夠配合 Vue.js 一同運用，希望這次的系列文章能幫助到各位，如果內容與實際使用上有出入也歡迎大家幫忙指正，那今天的章節就讓我花點時間說說自己的參賽感言吧。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;選題
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / Vue 做個記帳本 (下)</title>
    <link href="https://maxleebk.com/2020/10/13/highcharts-29/"/>
    <id>https://maxleebk.com/2020/10/13/highcharts-29/</id>
    <published>2020-10-13T01:35:00.000Z</published>
    <updated>2021-09-20T21:55:45.141Z</updated>
    
    <content type="html"><![CDATA[<p>昨天已經將記帳本打造出一個基本雛形了，但似乎功能並不是很多，純粹就只是看到消費的金額和走向而已，所以我們今天來利用圖表的「事件屬性」搭配 Vue 的 <code>emit</code> 來為記帳本新增一個查看明細的功能吧。</p><hr><h2 id="記帳本實作"><a href="#記帳本實作" class="headerlink" title="記帳本實作"></a>記帳本實作</h2><p>就像下圖所示，這次要做到的功能是希望能點擊「數據列」時，在下方顯示當天的消費明細以及總金額，讓我們的記帳本有更完整的功能。</p><p>而開發的邏輯是透過點擊拿到數據點的日期時間戳，然後利用父子層的溝通來將這個時間戳傳遞到一個新的「清單元件」中，清單元件會拿這個時間戳去打 Json-Server 的 API，取得該日期的帳目定顯示於畫面上。那就馬上動手開發吧！</p><img src="emit.gif" style="max-width: 800px; margin: 16px auto 0;" /><br/><h4 id="1-設定事件屬性"><a href="#1-設定事件屬性" class="headerlink" title="1.設定事件屬性"></a>1.設定事件屬性</h4><p>我們在圖表元件 <code>LedgerChart.vue</code> 中新增一個 Method，並將它作為圖表 <code>click</code> 事件的回呼函式，而由於回呼函式可以接到 Highcharts 的 <code>event</code> 物件，我們就可以拿到時間戳，並利用 <code>$emit</code> 來傳至 <code>App.vue</code>。</p><pre><code class="javascript">methods: {  selectDate() {    this.$emit(&quot;selectDate&quot;, event.point.category)  }}</code></pre><pre><code class="javascript">// computedoptions() {  let options = Object.assign(this.chartOptions, {});  options.series = this.seriesData;  options.xAxis.categories = this.xAxisCategories;  options.plotOptions.series.events = {    click: this.selectDate  };  return options;}</code></pre><p><br/><br/></p><h4 id="2-父層監聽自定義事件"><a href="#2-父層監聽自定義事件" class="headerlink" title="2.父層監聽自定義事件"></a>2.父層監聽自定義事件</h4><p>剛剛在 <code>LedgerChart.vue</code> 有 <code>emit</code> 了自定義事件，現在要在父層來監聽接收這事件，這樣每次點擊數據列就都會更新 <code>date</code> 了。</p><pre><code class="vue">&lt;template&gt;  &lt;div id=&quot;app&quot;&gt;    &lt;LedgerForm /&gt;    &lt;LedgerChart @selectDate=&quot;selectDate&quot; /&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import LedgerForm from &quot;./components/LedgerForm&quot;import LedgerChart from &quot;./components/LedgerChart&quot;export default {  name: &quot;App&quot;,  components: {    LedgerForm,    LedgerChart  },  data() {    return {      date: 0    }  },  methods: {    selectDate(val) {      this.date = val;    }  }}&lt;/script&gt;</code></pre><p><br/><br/></p><h4 id="3-清單元件-LedgerList-vue"><a href="#3-清單元件-LedgerList-vue" class="headerlink" title="3.清單元件 - LedgerList.vue"></a>3.清單元件 - LedgerList.vue</h4><p>再來就是下方要顯示的明細清單了，檔案內容如下，主要是透過接收一個 <code>date</code> 的 Prop，每當它更新時就會觸發 <code>watch</code>，然後利用 Json-Server 的 Filter 功能來抓出「當天」的資料，如此就能將消費明細顯示在畫面上了。</p><blockquote><p>明細上方的日期和總金額透過 <code>computed</code> 計算即可得到，因為不是重點，這邊就將程式碼省略了。</p></blockquote><pre><code class="vue">&lt;template&gt;  &lt;div v-if=&quot;date&quot;&gt;    &lt;div class=&quot;ledger-item&quot; v-for=&quot;item in fetchData&quot; :key=&quot;item.id&quot;&gt;      &lt;div&gt;{{ item.category }}&lt;/div&gt;      &lt;div&gt;{{ item.description }}&lt;/div&gt;      &lt;div&gt;NT$ {{ item.amount }}&lt;/div&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;  export default {    props: {      date: {        type: Number,        default: 0      }    },    data() {      return {        fetchData: []      }    },    watch: {      date(val) {        this.axios.get(`http://localhost:3000/accounts?date=${val}`)          .then((response) =&gt; {            this.fetchData = response.data;          });      }    }  }&lt;/script&gt;</code></pre><p><br/><br/></p><h4 id="4-掛載元件並傳入-Prop"><a href="#4-掛載元件並傳入-Prop" class="headerlink" title="4.掛載元件並傳入 Prop"></a>4.掛載元件並傳入 Prop</h4><p>清單元件完成後就將他掛到 <code>App.vue</code> 上了，並且記得要把剛剛的 <code>date</code> 傳進清單元件中。如此一來我們就成功增加了查看明細的新功能囉！</p><pre><code class="html">&lt;template&gt;  &lt;div id=&quot;app&quot;&gt;    &lt;LedgerForm /&gt;    &lt;LedgerChart @selectDate=&quot;selectDate&quot; /&gt;    &lt;LedgerList :date=&quot;date&quot; /&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><p><br/><br/></p><p>花了四天的時間我們從熟悉 Highcharts-Vue 的使用到最後開發出一個小作品，相信大家應該有感受到 Highcharts 與前端框架的配合是多麼的方便好用。不過隨著記帳本的完成，這個系列文章也即將告一段落了，明天最後一篇文章則會做個系列的總結，並講講我的參賽心得。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10252727" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;昨天已經將記帳本打造出一個基本雛形了，但似乎功能並不是很多，純粹就只是看到消費的金額和走向而已，所以我們今天來利用圖表的「事件屬性」搭配 Vue 的 &lt;code&gt;emit&lt;/code&gt; 來為記帳本新增一個查看明細的功能吧。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;記帳本實作&quot;&gt;&lt;
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / Vue 做個記帳本 (上)</title>
    <link href="https://maxleebk.com/2020/10/12/highcharts-28/"/>
    <id>https://maxleebk.com/2020/10/12/highcharts-28/</id>
    <published>2020-10-12T01:45:00.000Z</published>
    <updated>2021-09-20T21:55:45.137Z</updated>
    
    <content type="html"><![CDATA[<p>既然已經掌握了 Highcharts-Vue 的基本使用技巧，那今明兩天打算帶大家來實作一個「記帳本」，用一個比較完整的應用來完結這個系列，也算是一個學習成果的回顧。</p><hr><h2 id="記帳本實作"><a href="#記帳本實作" class="headerlink" title="記帳本實作"></a>記帳本實作</h2><p>如下圖所示，第一天打算先把我們記帳本的介面、圖表及資料串接完成，畫面大致如上，上方為新增帳目的表單元件，下方則是顯示每日消費金額的柱狀圖，樣式的話大家可以自由發揮，文章中將只會說明程式邏輯的部分。</p><img src="case.png" style="max-width: 800px; margin: 16px auto 0;" /><br/><h4 id="1-安裝-Json-Server"><a href="#1-安裝-Json-Server" class="headerlink" title="1.安裝 Json-Server"></a>1.安裝 Json-Server</h4><p>為了可以讓記帳本真的可以記帳，我們會需要資料庫來紀錄帳目，而我選擇使用的是 Json-Server，它讓我們可以用一個 Json 檔來作為簡易的資料庫，而且內建基本的 REST API 可以使用，這樣我們就不用真的架一個後端伺服器了，在終端機輸入下方指令就可以全域安裝了。</p><pre><code class="shell">npm install -g json-server</code></pre><p>安裝完成後新增一個 <code>db.json</code>，然後可以先手動新增一筆帳目，檔案內容如下：</p><pre><code class="json">{  &quot;accounts&quot;: [    {      &quot;id&quot;: 1,      &quot;category&quot;: &quot;伙食&quot;,      &quot;amount&quot;: &quot;50&quot;,      &quot;date&quot;: 1602028800000,      &quot;description&quot;: &quot;早餐&quot;    }  ]}</code></pre><p>檔案備妥後，在終端機輸入以下指令就可以啟動 <code>json-server</code>，這時候到 <code>http://localhost:3000/accounts</code>，就可以看到剛剛建立的資料了，未來只要是開啟伺服器的狀態就可以使用 API 來讀寫 <code>db.json</code> 的資料了。</p><pre><code class="shell">json-server db.json</code></pre><p><br/><br/></p><h4 id="2-安裝-axios"><a href="#2-安裝-axios" class="headerlink" title="2.安裝 axios"></a>2.安裝 axios</h4><p>資料庫有了之後，接下來在專案資料夾底下輸入終端機指令來安裝 <code>axios</code>，它可以讓我們更便捷的處理 XMLHttpRequest。</p><pre><code class="shell">npm install axios</code></pre><p>安裝好後到 <code>main.js</code> 添加以下程式碼來引用它，這樣我們就可以在元件裡使用 <code>this.axios.get()</code> 來呼叫 API 了。</p><pre><code class="javascript">import Vue from &quot;vue&quot;;import axios from &quot;axios&quot;;Vue.prototype.axios = axios;</code></pre><p><br/><br/></p><h4 id="3-Highcharts-全域設定"><a href="#3-Highcharts-全域設定" class="headerlink" title="3.Highcharts 全域設定"></a>3.Highcharts 全域設定</h4><p>由於這次的應用會使用到日期座標，所以我們可以來調整一下「語言設定」，設定方法是在 <code>main.js</code> 引入原生 Highcharts，然後一樣是呼叫 <code>setOptions()</code>。</p><pre><code class="javascript">import Vue from &quot;vue&quot;;import Highcharts from &quot;highcharts&quot;;Highcharts.setOptions({  lang: {    shortMonths: [&quot;1月&quot;, &quot;2月&quot;, ..., &quot;12月&quot;],    weekdays: [&quot;星期日&quot;, &quot;星期一&quot;, ..., &quot;星期六&quot;],  },  // 也可增加其他你像要的全域設定  credits: { enabled: false },  colors: [...]});</code></pre><p><br/><br/></p><h4 id="4-表單元件-LedgerForm-vue"><a href="#4-表單元件-LedgerForm-vue" class="headerlink" title="4.表單元件 - LedgerForm.vue"></a>4.表單元件 - LedgerForm.vue</h4><p>前置作業完成後就可以來開發元件了，首先是上方用來新增帳目的表單元件。新增一個檔案內容如下的元件，其中四個表單欄位剛好對應資料庫的內容，而點擊按鈕觸發的 <code>addItem</code> 就是用 <code>axios</code> 送出 <code>post</code> 請求，便會在資料庫添加一筆新的帳目。</p><br/><p><strong>對了，為了把重點放在圖表的應用上，有許多部分是被我省略的：</strong></p><ol><li>為了省去畫面處理的邏輯，我故意使用 Form 表單，讓資料送出時會自動刷新頁面，這部分的使用體驗可以再改善。</li><li>表單驗證的部分也被我省略了，為了防止錯誤的資料格式存進資料庫，再請各位自行撰寫。</li></ol><pre><code class="vue">&lt;template&gt;  &lt;form&gt;    &lt;fieldset&gt;      &lt;legend&gt;新增帳目&lt;/legend&gt;      &lt;div class=&quot;input-group&quot;&gt;        &lt;label&gt;日期&lt;/label&gt;        &lt;input type=&quot;date&quot; v-model=&quot;date&quot;&gt;        &lt;label&gt;分類&lt;/label&gt;        &lt;select v-model=&quot;category&quot;&gt;          &lt;option value=&quot;伙食&quot;&gt;伙食&lt;/option&gt;          &lt;option value=&quot;交通&quot;&gt;交通&lt;/option&gt;          &lt;option value=&quot;生活&quot;&gt;生活&lt;/option&gt;          &lt;option value=&quot;帳單&quot;&gt;帳單&lt;/option&gt;          &lt;option value=&quot;娛樂&quot;&gt;娛樂&lt;/option&gt;        &lt;/select&gt;        &lt;label&gt;金額&lt;/label&gt;        &lt;input type=&quot;number&quot; v-model.number=&quot;amount&quot;&gt;      &lt;/div&gt;      &lt;div class=&quot;input-group&quot;&gt;        &lt;label&gt;說明&lt;/label&gt;        &lt;input type=&quot;text&quot; v-model=&quot;description&quot;&gt;      &lt;/div&gt;      &lt;button @click=&quot;addItem&quot;&gt;+&lt;/button&gt;    &lt;/fieldset&gt;  &lt;/form&gt;&lt;/template&gt;&lt;script&gt;  export default {    data() {      return {        date: &quot;&quot;,        category: &quot;伙食&quot;,        amount: 0,        description: &quot;&quot;      }    },    methods: {      addItem() {        this.axios.post(&quot;http://localhost:3000/accounts&quot;, {          date: new Date(this.date).getTime(),          category: this.category,          amount: this.amount,          description: this.description        })      }    }  }&lt;/script&gt;</code></pre><p><br/><br/></p><h4 id="5-圖表元件-LedgerChart-vue"><a href="#5-圖表元件-LedgerChart-vue" class="headerlink" title="5.圖表元件 - LedgerChart.vue"></a>5.圖表元件 - LedgerChart.vue</h4><p><strong>可以紀錄帳目後，就要讓消費記錄透過圖表呈現出來了，而需求規格有以下幾點：</strong></p><ol><li>每一個支出類別都是一組數據列，例如伙食、娛樂、交通..等。</li><li>圖表為柱狀圖，不同數據列需要疊加，以便觀察每日總消費的起伏。</li><li>Ｘ軸為日期座標軸，並且顯示只顯示從今天算起的前七天。</li></ol><blockquote><p>避免模糊焦點，這次圖表只做到近七天的資料顯示，有興趣的話你也可以根據自己你想法改善這個範例。</p></blockquote><p>根據需求，我們先準備好需要的資料，包括儲存今日時間戳的 <code>todayTimeStamp</code>，儲存 API 資料的 <code>fetchData</code>，以及圖表設定 <code>chartOptions</code>。</p><pre><code class="javascript">data() {  return {    todayTimeStamp: 0,    fetchData: [],    chartOptions: {      chart: { type: &quot;column&quot; },      title: { text: &quot;每日消費&quot; },      tooltip: {        shared: true,        headerFormat: &quot;{point.key:%Y/%m/%d %A}&lt;br/&gt;&quot;,        valuePrefix: &quot;NT$&quot;      },      xAxis: {        type: &quot;datetime&quot;,        categories: [],        labels: { format: &quot;{value:%b%d}日&quot; },      },      yAxis: {        title: undefined,        labels: { format: &quot;NT$ {value}&quot; },      },      plotOptions: {        series: { stacking: &quot;normal&quot; }      },      series: [],    }  };}</code></pre><p>而API資料我們需要再 <code>created</code> 時先去取得，順便把今天的時間戳儲存起來，方便我們之後計算近七天的時間。</p><pre><code class="javascript">created() {  // 取得當日的時間戳  let now = new Date().getTime();  this.todayTimeStamp = now - now  % 86400000;  // call json-server api  this.axios.get(&quot;http://localhost:3000/accounts&quot;).then((response) =&gt; {    this.fetchData = response.data;  });},</code></pre><p>有了這些資料後，就可以透過 <code>computed</code> 來將資料處理成我們所需的格式了。</p><pre><code class="javascript">computed: {  // 利用當日時間戳來計算Ｘ軸所需的 categories 陣列  xAxisCategories() {    return Array(7).fill(0).map((date ,index) =&gt; {      return this.todayTimeStamp - 86400000 * index    }).reverse()  },  // 抓出所有不重複的支出類別  expendType() {    let allType = this.fetchData.map(item =&gt; item.category);    return Array.from(new Set(allType));  },  // 把 API 資料 map 成我們需要的格式  seriesData() {    return this.expendType.map(cate =&gt; {      let itemByCate = this.fetchData.filter(item =&gt; item.category === cate);      let points = this.xAxisCategories.map(date =&gt; {        return itemByCate.reduce((acc, item) =&gt; {          return item.date === date ? acc + Number(item.amount) : acc        }, 0)      })      return { name: cate, data: points };    });  },  // 將圖表設定和處理完的資料合併  options() {    let options = Object.assign(this.chartOptions, {});    options.series = this.seriesData;    options.xAxis.categories = this.xAxisCategories;    return options;  }}</code></pre><p>最後把 <code>options</code> 傳入圖表，並且記得把今天新增的兩個元件掛載到 <code>App.vue</code> 上，就可以看到消費紀錄呈現在圖表上囉。</p><pre><code class="html">&lt;template&gt;  &lt;div class=&quot;chart-container&quot;&gt;    &lt;div v-if=&quot;!fetchData.length&quot; class=&quot;noData&quot;&gt;無任何消費記錄&lt;/div&gt;    &lt;highcharts v-else :options=&quot;options&quot;&gt;&lt;/highcharts&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><img src="ledger.gif" style="max-width: 800px; margin: 16px auto 0;" /><p><br/><br/></p><p>辛苦各位了，今天的篇幅比較長，不過跟著今天一步步的流程下來，終於完成了一個比較完整的 Highcharts-Vue 應用，而明天我們將利用「事件屬性」來為這個應用再添加一個小功能。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10252336" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;既然已經掌握了 Highcharts-Vue 的基本使用技巧，那今明兩天打算帶大家來實作一個「記帳本」，用一個比較完整的應用來完結這個系列，也算是一個學習成果的回顧。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;記帳本實作&quot;&gt;&lt;a href=&quot;#記帳本實作&quot; class=&quot;heade
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / Vue 資料綁定</title>
    <link href="https://maxleebk.com/2020/10/11/highcharts-27/"/>
    <id>https://maxleebk.com/2020/10/11/highcharts-27/</id>
    <published>2020-10-11T13:22:00.000Z</published>
    <updated>2021-09-20T21:55:45.133Z</updated>
    
    <content type="html"><![CDATA[<p>昨天我們成功安裝 Highcharts-Vue 並繪製出一個基本的圖表，不過既然都已經使用 Vue 了，我們應該要好好運用「資料綁定」的概念，也就是當資料變動時，我們不需要再額外操作圖表，圖表就會自己動態的更新變化。</p><hr><h2 id="Data-Binding"><a href="#Data-Binding" class="headerlink" title="Data Binding"></a>Data Binding</h2><br/><p>我們在「資料更新 Method」有說過，在網頁中資料不會總是靜態的，所以當資料變動時，我們需要透過一些 Method 的呼叫來更新圖表，不過當我們使用前端框架後，圖表應該要可以自己響應資料的變動進而更新畫面，那下面我們就來把昨天的 <code>Chart.vue</code> 改寫一下。</p><br/><h4 id="1-資料形式調整"><a href="#1-資料形式調整" class="headerlink" title="1.資料形式調整"></a>1.資料形式調整</h4><p>首先要把資料改寫一下，照理說原始資料應該比較難像昨天那樣是已經處理過的模樣，所以我們另外用 <code>data</code> 物件來模擬從後端拿到的資料，然後將 <code>chartOptions</code> 裡面的 <code>xAxis.categories</code> 和 <code>series.data</code> 給清空，因為這兩個屬性的值應該是原始資料處理過後才拿得到的。</p><pre><code class="javascript">data() {  return {    data: {      &quot;18-24歲&quot;: 12,      &quot;25-29歲&quot;: 18,      &quot;30-34歲&quot;: 22,      &quot;35-39歲&quot;: 25,      &quot;40-44歲&quot;: 32,      &quot;45-49歲&quot;: 35,      &quot;50-54歲&quot;: 26,      &quot;55歲+&quot;: 18    },    chartOptions: {      chart: { type: &quot;column&quot; },      title: { text: &quot;公司員工年齡分佈&quot; },      xAxis: { categories: [] },      yAxis: {         title: { text: &quot;人數&quot; }      },      series: [{         name: &quot;XX公司員工&quot;,        data: []      }]    }  };}</code></pre><br/><br/><h4 id="2-撰寫-computed"><a href="#2-撰寫-computed" class="headerlink" title="2.撰寫 computed"></a>2.撰寫 computed</h4><p>那因為現在原始資料的格式並不是我們要的，而且未來資料還有可能會變動，所以可以選擇用 Vue 的 <code>computed</code> 來幫我們處理資料，而且它也會在資料變動時自動更新。</p><p>那其中 <code>xAxisCate</code> 和 <code>seriesData</code> 就是用來處理資料的，而 <code>options</code> 則是將資料與圖表設定進行結合，最後導出一個完整的 <code>options</code> 物件。</p><pre><code class="javascript">computed: {  xAxisCate() {    return Object.keys(this.data);  },  seriesData() {    return Object.values(this.data);  },  options() {    let options = Object.assign(this.chartOptions, {});    options.xAxis.categories = this.xAxisCate;    options.series[0].data = this.seriesData;    return options;  }}</code></pre><br/><br/><h4 id="3-資料綁定"><a href="#3-資料綁定" class="headerlink" title="3.資料綁定"></a>3.資料綁定</h4><p>有了 <code>options</code> 物件後，就可以把它作為 <code>prop</code> 傳入 <code>&lt;highcharts&gt;</code>，然後就可以看到跟昨天一樣的結果了。</p><pre><code class="html">&lt;template&gt;  &lt;highcharts :options=&quot;options&quot;&gt;&lt;/highcharts&gt;&lt;/template&gt;</code></pre><img src="vue-chart.png" style="max-width: 800px; margin: 16px auto 0;" /><br/><br/><h4 id="4-資料變動"><a href="#4-資料變動" class="headerlink" title="4.資料變動"></a>4.資料變動</h4><p>經過前面幾個步驟後，我們已經將資料與圖表做了綁定，接下來就要看看在資料改變時，圖表是否會更新畫面了。我們可以在畫面上新增以幾個按鈕，並綁定事件。</p><pre><code class="html">&lt;template&gt;  &lt;div&gt;    &lt;highcharts :options=&quot;chartOptions&quot;&gt;&lt;/highcharts&gt;    &lt;button @click=&quot;changeData&quot;&gt;改變資料&lt;/button&gt;    &lt;button @click=&quot;changeType(&#39;line&#39;)&quot;&gt;改為折線圖&lt;/button&gt;    &lt;button @click=&quot;changeType(&#39;column&#39;)&quot;&gt;改為柱狀圖&lt;/button&gt;  &lt;/div&gt;&lt;/template&gt;</code></pre><p>我們分別為按鈕綁定改變原始資料和圖表設定的 <code>methods</code>，看看圖表能不能在點擊按鈕後成功更新。</p><pre><code class="javascript">methods: {  changeData() {    this.xAxisCate.forEach((key) =&gt; {      this.data[key] = Math.floor(Math.random() * 20);    });  },  changeType(type) {    this.options.chart.type = type;  }}</code></pre><p>實際測試後，發現圖表確實的在資料發生變動的時候自動響應了新的圖表設定，並且根據設定進行了畫面上的更新。</p><img src="vue-binding.gif" style="max-width: 800px; margin: 16px auto 0;" /><p><br/><br/></p><p>今天算是真正使用上了 Vue 的特性來繪製 Highcharts 的圖表，透過資料綁定的方式讓圖表可以響應資料的改變，讓我們可以專注在資料的處理，而不用一再的操作圖表或呼叫 Method。</p><p>不過我今天的範例算是相當粗略，目的只在於向大家展示「資料綁定」的概念，假如你有 Vue 的開發經驗，肯定可以大幅改善這個元件的彈性、重用性。而明後兩天我也會透過比較完整的應用來展示更多 Highcharts-Vue 的使用方式。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10252156" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;昨天我們成功安裝 Highcharts-Vue 並繪製出一個基本的圖表，不過既然都已經使用 Vue 了，我們應該要好好運用「資料綁定」的概念，也就是當資料變動時，我們不需要再額外操作圖表，圖表就會自己動態的更新變化。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;Data-Bindin
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / Vue 建立圖表</title>
    <link href="https://maxleebk.com/2020/10/10/highcharts-26/"/>
    <id>https://maxleebk.com/2020/10/10/highcharts-26/</id>
    <published>2020-10-10T06:20:00.000Z</published>
    <updated>2021-09-20T21:55:45.133Z</updated>
    
    <content type="html"><![CDATA[<p>經過連續五天的實作練習，相信大家應該對於製作 Highcharts 圖表暸若指掌了，不過現在使用前端框架已是網頁開發的主流，Highcharts 是否有因應的方案呢？答案是有的，無論是 Angular、React 還是 Vue，都有對應的套件可以使用，不過本系列會以 Vue 的版本來介紹，若是其他框架的使用者，可以到 <strong><a href="https://github.com/highcharts" target="_blank" rel="noopener">官方Github</a></strong> 去找找對應的套件。</p><hr><h2 id="VisUalizE"><a href="#VisUalizE" class="headerlink" title="VisUalizE"></a>VisUalizE</h2><br/><p>其實在 Vue 裡使用 Highcharts 是件非常容易的事，下面我們就一步步從零開始，使用 Vue CLI 工具來達成資料視覺化。</p><br/><h4 id="1-安裝-Vue-CLI"><a href="#1-安裝-Vue-CLI" class="headerlink" title="1.安裝 Vue CLI"></a>1.安裝 Vue CLI</h4><p>如果你還未安裝 Vue CLI，那請先打開終端機／命令提示字元並輸入以下指令，將 Vue CLI 工具安裝在全域環境中。</p><blockquote><p>請先安裝 Node.js 才能使用 <code>npm</code> 指令。</p></blockquote><pre><code class="shell">npm install -g @vue-cli</code></pre><br/><br/><h4 id="2-建立專案"><a href="#2-建立專案" class="headerlink" title="2.建立專案"></a>2.建立專案</h4><p>全域安裝 Vue CLI 後就可以在終端機／命令提示字元中使用 <code>vue</code> 指令了，先用以下指令來創建一個新的專案。指令輸入完後，系統會詢問你要使用何種設定，這次系列文章使用 <code>default</code> 即可，若是有使用過的話也可以按你自己的習慣設定。</p><pre><code class="shell">vue create vue-highchart</code></pre><br/><br/><h4 id="3-安裝套件"><a href="#3-安裝套件" class="headerlink" title="3.安裝套件"></a>3.安裝套件</h4><p>專案建立完成後，先移動到專案資料夾，並依序安裝 Highcharts 和 Highcharts-Vue，分別是主程式以及 Vue 的擴充。</p><pre><code class="shell">cd vue-highchartsnpm install highchartsnpm install highcharts-vue</code></pre><p>等待安裝完畢後，我們要打開 <code>src</code> 資料夾下的 <code>main.js</code>，增加下面這幾行程式碼來啟動套件。</p><pre><code class="javascript">import Vue from &#39;vue&#39;;import HighchartsVue from &#39;highcharts-vue&#39;;Vue.use(HighchartsVue);</code></pre><br/><br/><h4 id="4-新增元件"><a href="#4-新增元件" class="headerlink" title="4.新增元件"></a>4.新增元件</h4><p>那此時前置作業都完成了，接者就可以在 <code>src/components</code> 底下新增 <code>Chart.vue</code> 元件，名稱你可以自行調整，檔案內容如下：</p><pre><code class="vue">&lt;template&gt;  &lt;highcharts :options=&quot;chartOptions&quot;&gt;&lt;/highcharts&gt;&lt;/template&gt;&lt;script&gt;export default {  data() {    return {      chartOptions: {        chart: { type: &quot;column&quot; },        title: { text: &quot;公司員工年齡分佈&quot; },        xAxis: {          categories: [            &quot;18-24歲&quot;,            &quot;25-29歲&quot;,            &quot;30-34歲&quot;,            &quot;35-39歲&quot;,            &quot;40-44歲&quot;,            &quot;45-49歲&quot;,            &quot;50-54歲&quot;,            &quot;55歲+&quot;          ]        },        yAxis: {          title: { text: &quot;人數&quot; }        },        series: [{          name: &quot;XX公司員工&quot;,          data: [12, 18, 22, 25, 32, 35, 26, 18]        }]      }    };  }};&lt;/script&gt;</code></pre><p>其中 <code>&lt;highcharts&gt;</code> 就是 Highcharts-Vue 註冊的全域元件，而 <code>:options</code> 這個 Prop 要傳入的就是 <code>options</code> 物件，所以你會看到 <code>chartOptions</code> 其實就是我們已經寫了二十幾天的圖表設定。</p><br/><br/><h4 id="5-掛載元件"><a href="#5-掛載元件" class="headerlink" title="5.掛載元件"></a>5.掛載元件</h4><p>元件完成後就，我們打開 <code>App.vue</code>，然後將內容改成下面這樣，將剛剛寫好的元件掛載進來，取代原本的 <code>HelloWorld.vue</code>。</p><pre><code class="vue">&lt;template&gt;  &lt;div id=&quot;app&quot;&gt;    &lt;chart /&gt;  &lt;/div&gt;&lt;/template&gt;&lt;script&gt;import chart from &quot;./components/Chart.vue&quot;export default {  name: &#39;App&#39;,  components: {    chart  }}&lt;/script&gt;</code></pre><br/><br/><h4 id="6-執行APP"><a href="#6-執行APP" class="headerlink" title="6.執行APP"></a>6.執行APP</h4><p>最後只要在專案資料夾底下執行指令就可以看到圖表囉！</p><pre><code class="shell">npm run serve</code></pre><img src="vue-chart.png" style="max-width: 800px; margin: 16px auto 0;" /><p><br/><br/></p><p>今天我們成功使用 Vue CLI 配合 Highcharts 的套件來完成圖表的繪製，不過目前還沒有真正發揮 Vue 的優勢，所以明天還要繼續了解如何透過 Vue 的資料雙向綁定來動態更新圖表資料或設定。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10251641" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;經過連續五天的實作練習，相信大家應該對於製作 Highcharts 圖表暸若指掌了，不過現在使用前端框架已是網頁開發的主流，Highcharts 是否有因應的方案呢？答案是有的，無論是 Angular、React 還是 Vue，都有對應的套件可以使用，不過本系列會以 Vu
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 金字塔圖表</title>
    <link href="https://maxleebk.com/2020/10/09/highcharts-25/"/>
    <id>https://maxleebk.com/2020/10/09/highcharts-25/</id>
    <published>2020-10-09T02:30:00.000Z</published>
    <updated>2021-09-20T21:55:45.133Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/wvGVGyR" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/wvGVGyR</a></strong></p></blockquote><p>相信大家在學生時期都有在課本中看過人口金字塔，而今天我們就是要用臺灣的人口統計資料來實作「金字塔圖表」。</p><hr><h2 id="實作目標"><a href="#實作目標" class="headerlink" title="實作目標"></a>實作目標</h2><img src="pyramid.png" style="max-width: 900px; margin: 16px auto 0;" /><br/><p>那上圖就是我們今天要製作圖表，其實分析一下可以發現金字塔圖表只是一個「雙Ｘ軸長條圖」，倒是它的Ｙ軸座標比較特別，最小刻度竟然在中間，越往兩側值越高。下面就來看看這是如何做到的吧！</p><blockquote><p><strong>提醒：</strong>長條圖中垂直的座標軸為Ｘ軸，水平為Ｙ軸，剛好跟其他圖表類型相反。</p></blockquote><p>這次的原始資料如下:</p><pre><code class="javascript">const colors = [&quot;#66BAB7&quot;, &quot;#EB7A77&quot;];const age = [&quot;0-9&quot;,&quot;10-19&quot;,&quot;20-29&quot;,&quot;30-39&quot;,&quot;40-49&quot;,&quot;50-59&quot;,&quot;60-69&quot;,&quot;70-79&quot;,&quot;80+&quot;];const male = [1046336, 1248418, 1653942, 1848095, 1818996, 1789423, 1376599, 594861, 339574];const female = [970889, 1142606, 1533181, 1851812, 1875771, 1849072, 1489570, 712084, 438873];</code></pre><hr><h2 id="動手開發"><a href="#動手開發" class="headerlink" title="動手開發"></a>動手開發</h2><br/><h4 id="1-容器準備"><a href="#1-容器準備" class="headerlink" title="1. 容器準備"></a>1. 容器準備</h4><p>無論如何，第一步永遠都是把要放圖表的容器先準備好。</p><pre><code class="html">&lt;div id=&quot;barChart&quot;&gt;&lt;/div&gt;</code></pre><br/><br/><h4 id="2-資料準備"><a href="#2-資料準備" class="headerlink" title="2. 資料準備"></a>2. 資料準備</h4><p>其實今天的原始資料都已經可以直接拿來使用了，但再來就是Ｙ軸的秘密了，男性的資料我們要稍微動一下手腳。透過 <code>map</code> 把男性資料乘以 <code>-1</code>，這樣數據列剛好一組正數一組負數，自然就會往兩邊延伸了。</p><pre><code class="javascript">const maleSeries = male.map(val =&gt; val * -1);</code></pre><br/><br/><h4 id="3-創建圖表與區塊設定"><a href="#3-創建圖表與區塊設定" class="headerlink" title="3. 創建圖表與區塊設定"></a>3. 創建圖表與區塊設定</h4><p><strong>資料備妥後，剩下就是圖表的設定跟創建了，不過要做出金字塔圖表有幾個重點要注意：</strong></p><ol><li>初始的Ｘ軸刻度會是上低下高，所以記得要把 <code>reversed</code> 屬性關掉翻轉回來。</li><li>因為男性這側的Ｙ軸刻度會是負數，所以記得要用 <code>formatter</code> 來取絕對值，才不會出現負號。</li><li>提示框內容裡也會出現負數，一樣要透過格式化屬性處理。</li><li>數據列的 <code>stacking</code> 屬性要記得設定，才會有堆疊效果。</li></ol><br/><p>只要有做到以上幾點，金字塔圖表就能輕輕鬆鬆做出來了，大家也試著做做看吧！</p><pre><code class="javascript">let myChart = Highcharts.chart(&quot;container&quot;, {  chart: { type: &quot;bar&quot; },  credits: { text: &quot;數據來源: 內政部戶政司&quot; },  colors: colors,  title: { text: &quot;2018 臺灣人口金字塔&quot; },  tooltip: {    headerFormat: &quot;&lt;b&gt;{point.key}歲&lt;/b&gt;&lt;br/&gt;&quot;,    pointFormatter() {      let value = Math.abs(this.y);      let formatValue = Highcharts.numberFormat(value, 0, &quot;&quot;, &quot;,&quot;);      return `${formatValue}人`;    }  },  xAxis: [    {       categories: age,      reversed: false,      labels: { format: &quot;{value}歲&quot; }    },    {       categories: age,      opposite: true,      reversed: false,      labels: { format: &quot;{value}歲&quot; }    }  ],  yAxis: {    title: { text: undefined },    labels: {       formatter() {        return `${Math.abs(this.value / 10000)}萬人`       }    }  },  plotOptions: {    series: {      groupPadding: 0,      pointPadding: 0,      stacking: &quot;normal&quot;    }  },  series: [    { name: &quot;男性&quot;, data: maleSeries },    { name: &quot;女性&quot;, data: female, xAxis: 1 }  ]});</code></pre><blockquote><p><code>groupPadding</code> 和 <code>pointPadding</code> 都設為 <code>0</code>，才能移除長條圖之間的間距，也才會有這種階梯狀的圖形效果。</p></blockquote><p><br/><br/></p><p>那今天就正式完成了最後一個實作範例了，不過 Highcharts 的圖表應用當然還有百百種，可以到 <a href="https://www.highcharts.com/demo" target="_blank" rel="noopener">官方DEMO</a> 去挖挖寶，也希望大家可以發揮創意，組合自己獨特的圖表內容與功能。</p><p>那麼明天就要進入本系列的最後一個階段了，就是在前端框架-Vue 底下使用 Highcharts，透過 Vue 的元件和資料綁定的機制來協助我們開發。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10251181" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/wvGVGyR&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 雙Ｙ軸複合圖表</title>
    <link href="https://maxleebk.com/2020/10/08/highcharts-24/"/>
    <id>https://maxleebk.com/2020/10/08/highcharts-24/</id>
    <published>2020-10-08T04:58:00.000Z</published>
    <updated>2021-09-20T21:55:45.129Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/mdPZaRr" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/mdPZaRr</a></strong></p></blockquote><p>複合圖表和複數座標軸在前面的章節其實都有介紹過，不過今天我們要結合一下時事，用台灣疫情的資料來實際做一個「雙Ｙ軸複合圖表」。</p><hr><h2 id="實作目標"><a href="#實作目標" class="headerlink" title="實作目標"></a>實作目標</h2><img src="doubleY.png" style="max-width: 800px; margin: 16px auto 0;" /><br/><p>如上圖所示，這次要做的是柱狀圖和折線圖的複合圖表，並且累計確診是使用左邊的人數Ｙ軸，而致死率則是右邊的百分比Ｙ軸。不過複合式圖表應該算是蠻簡單的，之前的 <strong><a href="https://codepen.io/max-lee/pen/mdPxGyq" target="_blank" rel="noopener">範例</a></strong> 也已經有展示過了，所以這次的重點會放在雙Ｙ軸上面。那今天為大家準備的原始資料如下：</p><pre><code class="javascript">const colors = [&quot;#8E354A&quot;, &quot;#1C1C1C&quot;];const epidemic = [  { &quot;月份&quot;: 2, &quot;累計確診&quot;: 39, &quot;累計死亡&quot;: 1 },  { &quot;月份&quot;: 3, &quot;累計確診&quot;: 322, &quot;累計死亡&quot;: 5 },  { &quot;月份&quot;: 4, &quot;累計確診&quot;: 429, &quot;累計死亡&quot;: 6 },  { &quot;月份&quot;: 5, &quot;累計確診&quot;: 442, &quot;累計死亡&quot;: 7 },  { &quot;月份&quot;: 6, &quot;累計確診&quot;: 447, &quot;累計死亡&quot;: 7 },  { &quot;月份&quot;: 7, &quot;累計確診&quot;: 467, &quot;累計死亡&quot;: 7 },  { &quot;月份&quot;: 8, &quot;累計確診&quot;: 488, &quot;累計死亡&quot;: 7 },  { &quot;月份&quot;: 9, &quot;累計確診&quot;: 514, &quot;累計死亡&quot;: 7 },];</code></pre><hr><h2 id="動手開發"><a href="#動手開發" class="headerlink" title="動手開發"></a>動手開發</h2><br/><h4 id="1-容器準備"><a href="#1-容器準備" class="headerlink" title="1. 容器準備"></a>1. 容器準備</h4><p>第一步還是一樣，要先準備好放圖表的容器，另外今天偷偷跟大家說一個小撇步，如果容器有設定 HTML <code>id</code> 屬性的話，其實 ID 名稱可以直接作為 <code>chart()</code> 的 <code>element</code> 參數。但先前怕大家覺得怎麼突然沒來由的傳了一個字串，所以就還是用了比較保守的寫法。</p><pre><code class="html">&lt;div id=&quot;container&quot;&gt;&lt;/div&gt;</code></pre><pre><code class="javascript">// const container = document.querySelector(&#39;#container&#39;);// 可以省略上面這行，直接將id名稱作為參數let myChart = Highcharts.chart(&quot;container&quot;, {...});</code></pre><br/><br/><h4 id="2-資料準備"><a href="#2-資料準備" class="headerlink" title="2. 資料準備"></a>2. 資料準備</h4><p>再來就是把需要的資料透過原始資料 Mapping 出來，這裡我有把月份給 <code>map</code> 出來，因為這樣可以直接作為Ｘ軸的 <code>categories</code> 使用，就不用設定一堆屬性來做「日期座標軸」了。</p><pre><code class="javascript">const month = epidemic.map(data =&gt; `${data[&quot;月份&quot;]}月`);const confirmedNum = epidemic.map(data =&gt; data[&quot;累計確診&quot;]);const deathRate = epidemic.map(data =&gt; {  return Math.floor(data[&quot;累計死亡&quot;] / data[&quot;累計確診&quot;] * 10000) / 100;});</code></pre><br/><br/><h4 id="3-創建圖表與區塊設定"><a href="#3-創建圖表與區塊設定" class="headerlink" title="3. 創建圖表與區塊設定"></a>3. 創建圖表與區塊設定</h4><p><strong>資料準備好後就可以建立圖表了，不過大家要注意一下我們的圖表設定，有下面幾個重點：</strong></p><ol><li>因為要做的是複數座標軸，所以Ｙ軸設定傳入的是 <strong>陣列</strong>，裡面的兩組物件代表的就是兩組Ｙ軸。</li><li>第二組的百分比Ｙ軸要加上 <code>opposite</code> 屬性，才會顯示在右邊。</li><li>數據列必須要設定 <code>yAxis</code> 屬性，用來指定要使用陣列中哪一組座標軸。</li></ol><br/><p>其中最容易忘記的就是第三點，要是沒有設定 <code>xAxis</code> 或 <code>yAxis</code> 屬性，那所有數據列都會採用第一組座標軸，最後圖表的結果就會很不一樣了。</p><pre><code class="javascript">let myChart = Highcharts.chart(&quot;container&quot;, {  chart: { height: 500 },  colors: colors,  credits: { text: &quot;數據來源: 衛福部疾管署&quot; },  title: { text: &quot;2020 臺灣疫情報告&quot; },  tooltip: {    headerFormat: &quot;&lt;b&gt;{point.key}&lt;/b&gt;&lt;br/&gt;&quot;,    pointFormat: &quot;{series.name}: {point.y} {series.userOptions.custom}&quot;,  },  xAxis: { categories: month },  yAxis: [    {      title: { text: &quot;人數&quot; },      labels: { format: &quot;{value}人&quot; }    },    {      title: { text: &quot;百分比&quot; },      labels: { format: &quot;{value}％&quot; },      opposite: true    }  ],  series: [    {      name: &quot;累計確診人數&quot;,      type: &quot;column&quot;,      data: confirmedNum,      custom: &quot;人&quot;    },    {      name: &quot;致死率&quot;,      data: deathRate,      yAxis: 1, // 指定第二組座標軸，1 為索引值      custom: &quot;%&quot;    }  ]});</code></pre><p><br/><br/></p><p>今天實作了「雙Ｙ軸複合圖表」，算是一個很常見的圖表類型，能夠運用的情境應該蠻多的，建議大家可以練習看看。接著明天，我們要再換一個題目來做做看「金字塔圖表」，也即將會是最後一個實作範例。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10250764" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/mdPZaRr&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 下鑽圖表</title>
    <link href="https://maxleebk.com/2020/10/07/highcharts-23/"/>
    <id>https://maxleebk.com/2020/10/07/highcharts-23/</id>
    <published>2020-10-07T02:35:00.000Z</published>
    <updated>2021-09-20T21:55:45.121Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/oNxrMRr" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/oNxrMRr</a></strong></p></blockquote><p>今天要來實作的是「下鑽圖表」，原文是 DrillDown Charts，它的概念其實就是把數據列分為上下層，可以透過點擊上層來鑽到下層，從而觀看更細節的資料，光用說的可能很難想像，我們直接看看範例吧。</p><hr><h2 id="實作目標"><a href="#實作目標" class="headerlink" title="實作目標"></a>實作目標</h2><img src="drilldown.gif" style="max-width: 800px; margin: 16px auto 0;" /><br/><p>下鑽圖表就如上圖所示，點擊數據點就可以看到更細節的資料，右上角還有個返回按鈕，是不是覺得和「圖表連動」的範例有點像呢？</p><p>其實還真的有點類似，但其實差異還是不小的：</p><ul><li><strong>下鑽圖表:</strong> 只能運用在「單個圖表」，而且是透過點擊上層「數據點」，來看下層「數據列」。</li><li><strong>圖表連動:</strong> 可以讓「多個圖表」進行交互，無論數據列或數據點都可以設定事件或更新資料。</li></ul><p>那接下來就來實作看看吧，事前資料也和前兩天一樣：</p><pre><code class="javascript">const categories = [&quot;18-24&quot;, &quot;25-29&quot;, &quot;30-34&quot;, &quot;35-39&quot;, &quot;40-44&quot;, &quot;45-49&quot;, &quot;50-54&quot;, &quot;55+&quot;];const colors = [ &quot;rgb(119, 146, 174)&quot;, &quot;rgb(83, 119, 122)&quot;, &quot;rgb(99, 99, 104)&quot;];const data = {  &quot;工程部&quot;: [24, 37, 30, 24, 18, 11, 3, 2],  &quot;銷售部&quot;: [23, 30, 35, 28, 10, 8, 2, 1],  &quot;企劃部&quot;: [22, 32, 27, 25, 16, 6, 4, 3]};</code></pre><hr><h2 id="動手開發"><a href="#動手開發" class="headerlink" title="動手開發"></a>動手開發</h2><br/><h4 id="1-掛載下鑽模組"><a href="#1-掛載下鑽模組" class="headerlink" title="1. 掛載下鑽模組"></a>1. 掛載下鑽模組</h4><p>下鑽功能的支援必須要額外掛載模組，所以除了原本基礎的 Highcharts 之外，我們還要在加入一支 <code>script</code>。</p><pre><code class="html">&lt;script src=&quot;http://cdn.highcharts.com.cn/highcharts/highcharts.js&quot;&gt;&lt;/script&gt;&lt;script src=&quot;https://code.highcharts.com/modules/drilldown.js&quot;&gt;&lt;/script&gt;</code></pre><br/><br/><h4 id="2-容器準備"><a href="#2-容器準備" class="headerlink" title="2. 容器準備"></a>2. 容器準備</h4><p>下鑽圖表一單個圖表的操作互動，所以只需要一個容器即可。</p><pre><code class="html">&lt;div id=&quot;pie&quot;&gt;&lt;/div&gt;</code></pre><br/><br/><h4 id="3-學習下鑽屬性"><a href="#3-學習下鑽屬性" class="headerlink" title="3. 學習下鑽屬性"></a>3. 學習下鑽屬性</h4><p>那想要圖表有下鑽功能就必須要設定 <code>drilldown</code> 屬性，但既然是一個新的屬性，就先來看看如何使用吧！</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  series: [{    data: [      { name: &quot;數據點1&quot;, drilldown: &quot;id1&quot;, y: 10 },      { name: &quot;數據點2&quot;, drilldown: &quot;id2&quot;, y: 20 }    ]   }],  drilldown: {    series: [      { name: &quot;下層數據列1&quot;, id: &quot;id1&quot;, data: [5, 5] },      { name: &quot;下層數據列2&quot;, id: &quot;id2&quot;, data: [10, 10] },    ]  }});</code></pre><p>其實重點就在於為上層數據列中的「數據點」添加 <code>drilldown</code> 名稱，並在 <code>drilldown</code> 設定區塊中加上對應的「數據列」，而數據列必須有著和上層數據點相同名稱的 <code>id</code> 屬性，這樣兩者就可以聯繫起來，而後產生我們要的效果。</p><br/><br/><h4 id="4-資料準備"><a href="#4-資料準備" class="headerlink" title="4. 資料準備"></a>4. 資料準備</h4><p>知道下鑽屬性的設定方法後，就把原生資料 Mapping 出符合需求的格式吧。<code>piePoints</code> 為上層的 <strong>三個數據點</strong>，要加上 <code>drilldown</code> 屬性，<code>drilldownSeries</code> 為下層的 <strong>三組數據列</strong>，要加上 <code>id</code>。</p><pre><code class="javascript">const dataKeys = Object.keys(data);const piePoints = dataKeys.map((department, index) =&gt; ({  name: department,  drilldown: department,  color: colors[index],  y: data[department].reduce((arr, val) =&gt; arr + val)}));const drilldownSeries = dataKeys.map((department, sIndex) =&gt; ({  name: department,  id: department,  data: data[department].map((value, pIndex) =&gt; ({    name: categories[pIndex],    color: rgbToRgba(colors[sIndex], 1 - pIndex * 0.05),    y: value,  }))}))</code></pre><p>下鑽資料的漸層依然是透過 <code>rgbToRgba</code> 這個函式來幫忙轉換。</p><pre><code class="javascript">function rgbToRgba(rgb, alpha) {  return rgb.replace(&quot;rgb&quot;, &quot;rgba&quot;).replace(&quot;)&quot;, `,${alpha})`)};</code></pre><br/><br/><h4 id="5-創建圖表與區塊設定"><a href="#5-創建圖表與區塊設定" class="headerlink" title="5. 創建圖表與區塊設定"></a>5. 創建圖表與區塊設定</h4><p>再來就是把圖表創建出來，把區塊設定調整一下，最後帶入資料就完成了，是不是很簡單呢？</p><pre><code class="javascript">const pie = document.querySelector(&#39;#pie&#39;);let pieChart = Highcharts.chart(pie, {  chart: { height: 500, type: &quot;pie&quot; },  credits: { enabled: false },  title: { text: &quot;公司部門年齡人數佔比&quot; },  tooltip: {    headerFormat: &quot;&lt;b&gt;{point.key}&lt;/b&gt;&lt;br/&gt;&quot;,    pointFormat: &quot;{point.percentage:.1f} %／{point.y}人&quot;,  },  plotOptions: {    series: {      states: {        inactive: { enabled: false }      }    }  },  series: [{ data: piePoints }],  drilldown: { series: drilldownSeries }});</code></pre><p><br/><br/></p><p>這幾天的實作大家是否有發現，其實最難的部分都是在「資料準備」的環節，不過實際開發就是會如此，我們從後端或外部 API 獲得的資料未必會符合 Highcharts 所需的格式，所以就必須靠前端來把原始資料重新組裝轉換一下，才能套用在圖表裡。</p><p>那今天透過實作又認識了「下鑽圖表」這個新的圖表型態，明天的話我們換個題目來實作看看「雙Ｙ軸複合圖表」吧！</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10250229" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/oNxrMRr&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 雙層圓餅圖</title>
    <link href="https://maxleebk.com/2020/10/06/highcharts-22/"/>
    <id>https://maxleebk.com/2020/10/06/highcharts-22/</id>
    <published>2020-10-06T06:15:00.000Z</published>
    <updated>2021-09-20T21:55:45.121Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/vYGqGJj" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/vYGqGJj</a></strong></p></blockquote><p>今天要延續昨天「公司部門年齡分佈與人數佔比」的主題，把昨天需要點擊柱狀圖才能看到的「年齡佔比圓餅圖」和「部門人數佔比圓餅圖」合併在同一張圖表裡。</p><hr><h2 id="實作目標"><a href="#實作目標" class="headerlink" title="實作目標"></a>實作目標</h2><img src="case.png" style="max-width: 800px; margin: 16px auto 0;" /><br/><p>就如文章開頭所說，我們今天要將兩個圓餅圖合併起來，而最後的成果就出現像上圖分為內外層的雙層圓餅圖，而「雙層圓餅圖」的設定其實沒有想像的那麼複雜，下面我們就來一步步完成它吧。而事前的資料也和昨天一樣：</p><pre><code class="javascript">const categories = [&quot;18-24&quot;, &quot;25-29&quot;, &quot;30-34&quot;, &quot;35-39&quot;, &quot;40-44&quot;, &quot;45-49&quot;, &quot;50-54&quot;, &quot;55+&quot;];const colors = [ &quot;rgb(119, 146, 174)&quot;, &quot;rgb(83, 119, 122)&quot;, &quot;rgb(99, 99, 104)&quot;];const data = {  &quot;工程部&quot;: [24, 37, 30, 24, 18, 11, 3, 2],  &quot;銷售部&quot;: [23, 30, 35, 28, 10, 8, 2, 1],  &quot;企劃部&quot;: [22, 32, 27, 25, 16, 6, 4, 3]};</code></pre><hr><h2 id="動手開發"><a href="#動手開發" class="headerlink" title="動手開發"></a>動手開發</h2><br/><h4 id="1-容器準備"><a href="#1-容器準備" class="headerlink" title="1. 容器準備"></a>1. 容器準備</h4><p>既然是把兩個圓餅圖合併，那容器當然只需要一個，先把它準備好。</p><pre><code class="html">&lt;div id=&quot;pie&quot;&gt;&lt;/div&gt;</code></pre><br/><br/><h4 id="2-資料準備"><a href="#2-資料準備" class="headerlink" title="2. 資料準備"></a>2. 資料準備</h4><p>再來也是要先把圖表資料給準備好，利用原始資料來 Mapping 出我們想要的資料格式，內層的資料會是部門的人數加總，外層則是將各部門的八個年齡層分散開來，也就是總共會有二十四個數據點。</p><pre><code class="javascript">const dataKeys = Object.keys(data);const innerPiePoints = dataKeys.map((department, index) =&gt; ({  name: department,  color: colors[index],  y: data[department].reduce((arr, val) =&gt; arr + val)}));const outerPiePoints = dataKeys.map((department, sIndex) =&gt; {  return data[department].map((value, pIndex) =&gt; ({    name: categories[pIndex],    color: rgbToRgba(colors[sIndex], 1 - pIndex * 0.05)    y: value,  }))}).flat();</code></pre><p>另外為了讓外層的扇形有漸層顏色，一樣要用到昨天的顏色轉換函式，就偷偷把它拿過來使用吧。</p><pre><code class="javascript">function rgbToRgba(rgb, alpha) {  return rgb.replace(&quot;rgb&quot;, &quot;rgba&quot;).replace(&quot;)&quot;, `,${alpha})`)};</code></pre><br/><br/><h4 id="3-創建圖表與區塊設定"><a href="#3-創建圖表與區塊設定" class="headerlink" title="3. 創建圖表與區塊設定"></a>3. 創建圖表與區塊設定</h4><p>最後就是創建圓餅圖了，這次的設定重點在於我們設定了內外兩組數據列，並且利用 <code>innerSize</code> 屬性將外層變為「甜甜圈圖」，而內層則利用 <code>size</code> 屬性來設定成可以剛好放入甜甜圈缺口中的尺寸，如此就可以製作出「雙層圓餅圖」的效果，所以可以發現 <code>size</code> 和 <code>innerSize</code> 的值是一樣的。</p><pre><code class="javascript">const pie = document.querySelector(&#39;#pie&#39;);let pieChart = Highcharts.chart(pie, {  chart: { height: 500, type: &quot;pie&quot; },  credits: { enabled: false },  title: { text: &quot;公司部門年齡人數佔比&quot; },  tooltip: {    headerFormat: &quot;&lt;b&gt;{point.key}&lt;/b&gt;&lt;br/&gt;&quot;,    pointFormat: &quot;{point.percentage:.1f} %／{point.y}人&quot;,  },  series: [    {       size: &quot;220px&quot;,      data: innerPiePoints,      states: { inactive: { enabled: false } },      dataLabels: {        distance: -50,        style: { fontSize: &quot;14px&quot; }      },    },    {      innerSize: &quot;220px&quot;,      data: outerPiePoints,      dataLabels: {        format: &quot;{key}歲&quot;,        style: { color: &quot;#7e7e7e&quot; }      }    },  ]});</code></pre><img src="inner.png" style="max-width: 900px; margin: 16px auto 0;" /><blockquote><p><strong>注意:</strong> 內層數據列的「數據標籤」要將 <code>distance</code> 設為負數，不然會蓋在外層數據列上方，可能比較不美觀，也不方便觀看。</p></blockquote><p><br/><br/></p><p>雙層圓餅圖是不是一個 CP 值很高的圖表呢？簡簡單單設定就可以製作出看起來很專業的圖表，之後大家如果有遇到類似的資料型態，也可以試試看喔。至於明天，我們還是會延續同一個題目來介紹「下鑽圖表」。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10249790" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/vYGqGJj&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 圖表連動</title>
    <link href="https://maxleebk.com/2020/10/05/highcharts-21/"/>
    <id>https://maxleebk.com/2020/10/05/highcharts-21/</id>
    <published>2020-10-05T03:35:00.000Z</published>
    <updated>2021-09-20T21:55:45.109Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/JjXqYyz" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/JjXqYyz</a></strong></p></blockquote><p>經過前面各種設定屬性與 Method 的轟炸後，我們先來個簡單的小應用，也算是給自己的一個小驗收。</p><hr><h2 id="實作目標"><a href="#實作目標" class="headerlink" title="實作目標"></a>實作目標</h2><p><img src="case.gif" alt=""></p><p>今天打算要來實作圖表連動的功能，主題是「公司部門年齡分佈與人數佔比」，功能如上圖所示，柱狀圖會有三個部門的數據列資料，且點擊數據列時會使圓餅圖更換標題，並且呈現特定部門的各年齡人數佔比，額外還提供一個按鈕來重新觀看各部門的人數佔比。而事前我們已得知的資料如下：</p><pre><code class="javascript">const categories = [&quot;18-24&quot;, &quot;25-29&quot;, &quot;30-34&quot;, &quot;35-39&quot;, &quot;40-44&quot;, &quot;45-49&quot;, &quot;50-54&quot;, &quot;55+&quot;];const colors = [ &quot;rgb(119, 146, 174)&quot;, &quot;rgb(83, 119, 122)&quot;, &quot;rgb(99, 99, 104)&quot;];const data = {  &quot;工程部&quot;: [24, 37, 30, 24, 18, 11, 3, 2],  &quot;銷售部&quot;: [23, 30, 35, 28, 10, 8, 2, 1],  &quot;企劃部&quot;: [22, 32, 27, 25, 16, 6, 4, 3]};</code></pre><hr><h2 id="動手開發"><a href="#動手開發" class="headerlink" title="動手開發"></a>動手開發</h2><br/><h4 id="1-容器與元素準備"><a href="#1-容器與元素準備" class="headerlink" title="1. 容器與元素準備"></a>1. 容器與元素準備</h4><p>大略了解功能需求後，就要來一步步來完成應用了，首先把容器和按鈕準備一下吧，樣式部分就留給各位自由發揮了</p><pre><code class="html">&lt;div class=&quot;container&quot;&gt;  &lt;div id=&quot;column&quot;&gt;&lt;/div&gt;  &lt;div id=&quot;pie&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;button class=&quot;overview&quot;&gt;返回看整體佔比&lt;/button&gt;</code></pre><br/><br/><h4 id="2-資料準備"><a href="#2-資料準備" class="headerlink" title="2. 資料準備"></a>2. 資料準備</h4><p>接著把一些基本變數跟圖表資料準備一下，這個部分要注意的是「柱狀圖」和「圓餅圖」的資料格式，柱狀圖的部分我準備的是「數據列」的資料，而圓餅圖則是 Mapping 出了「數據點」的資料。</p><pre><code class="javascript">const dataKeys = Object.keys(data);const columnSeries = dataKeys.map(department =&gt; ({  name: department,  data: data[department]}));const piePoints = dataKeys.map(department =&gt; ({  name: department,  y: data[department].reduce((arr, val) =&gt; arr + val)}));</code></pre><br/><br/><h4 id="3-主題設定"><a href="#3-主題設定" class="headerlink" title="3. 主題設定"></a>3. 主題設定</h4><p>再來先用「主題設定」把一些共同的設定先處理一下，像是顏色和版權標籤。</p><pre><code class="javascript">Highcharts.setOptions({  colors: colors,  credits: { enabled: false }});</code></pre><br/><br/><h4 id="4-創建圖表與區塊設定"><a href="#4-創建圖表與區塊設定" class="headerlink" title="4. 創建圖表與區塊設定"></a>4. 創建圖表與區塊設定</h4><p>然後用 <code>Highcharts.chart()</code> 來把這次的兩個主要圖表處建出來，這邊我暫時還沒有設定「事件屬性」，而是先把基本的區塊設定給完成，讓圖表先出顯示出來，後面會再透過其他方式加上去。</p><blockquote><p>記得要用變數將「圖表實例」存起來，之後才能呼叫其中的 Method。</p></blockquote><pre><code class="javascript">const column = document.querySelector(&#39;#column&#39;);let columnChart = Highcharts.chart(column, {  chart: { type: &quot;column&quot; },  title: { text: &quot;公司部門年齡分佈&quot; },  xAxis: {    categories,    labels: { format: &quot;{value}歲&quot; }  },  yAxis: {     title: { text: &quot;人數&quot; }   },  tooltip: {    headerFormat: &quot;&lt;b&gt;{series.name}&lt;/b&gt;&lt;br/&gt;&quot;,    pointFormat: &quot;{point.category}: {point.y}人&quot;,  },  series: columnSeries});const pie = document.querySelector(&#39;#pie&#39;);let pieChart = Highcharts.chart(pie, {  chart: { type: &quot;pie&quot; },  title: { text: &quot;公司部門人數佔比&quot; },  tooltip: {    headerFormat: &quot;&lt;b&gt;{point.key}&lt;/b&gt;&lt;br/&gt;&quot;,    pointFormat: &quot;{point.percentage:.1f} %／{point.y}人&quot;,  },  plotOptions: {    series: {      size: &quot;80%&quot;,      states: { inactive: { enabled: false } }    }  },  series: [{ data: piePoints }]});</code></pre><p>這邊我在圓餅圖設定了一個之前沒介紹的屬性 <code>series.states</code>，它可以開關數據列的狀態及調整樣式，像這次我把 <code>inactive</code> (非聚焦狀態) 給關閉，這樣當我在聚焦某個數據點(扇形)時，其他非聚焦狀態的數據點就不會被反灰了。想更了解這個屬性的話可以看 <strong><a href="https://api.highcharts.com/highcharts/series.line.states" target="_blank" rel="noopener">官方文件</a></strong>。</p><img src="state.png" style="max-width: 800px; margin: 16px auto 0;" /><br/><br/><h4 id="5-柱狀圖的事件設定"><a href="#5-柱狀圖的事件設定" class="headerlink" title="5. 柱狀圖的事件設定"></a>5. 柱狀圖的事件設定</h4><p>圖表都出來後，我們就要來處理事件的部分了，這邊用圖表的 <code>update()</code> 方法來為柱狀圖更新「繪圖區設定」，這樣所有數據列就都會被設定到了。那 <code>columnClick</code> 這個變數就是事件的回呼函式了，點擊發生時的邏輯就會寫在這裡面。</p><pre><code class="javascript">columnChart.update({  plotOptions: {    series: {      events: { click: columnClick }    }  }});</code></pre><p><strong>先來細數一下當點擊發生時會發生哪些事：</strong></p><ol><li>圓餅圖的數據點顏色會變成該部門數據列的顏色漸層</li><li>圓餅圖的數據點資料會改為該部門的各年齡人數資料</li><li>圓餅圖的標題會顯示該部門的的名稱</li></ol><br/><p>知道要做哪些事情後，就可以來設計邏輯了，主要概念會是點擊柱狀圖數據列時可以透過 <code>event</code> 事件物件來取得「數據列物件」，並利用數據列的顏色、資料和名稱來改變圓餅圖的設定。</p><pre><code class="javascript">function columnClick() {  const { color, points, name } = event.point.series;  console.log(color, points, name);};</code></pre><p>首先顏色因為是自己設定的，所以已經知道會是 <code>rgb</code> 格式了，若要把圓餅圖數據點的顏色改成漸層色，可以轉成 <code>rgba</code> 後利用透明度做出漸層效果，所以可以先設計一個調整顏色透明度的輔助函式吧。</p><pre><code class="javascript">function rgbToRgba(rgb, alpha) {  return rgb.replace(&quot;rgb&quot;, &quot;rgba&quot;).replace(&quot;)&quot;, `,${alpha})`);};</code></pre><p>再來就可以透過 <code>points</code> 來 Mapping 出我們要的數據點格式，並且使用 <code>setData()</code> 和 <code>setTitle()</code> 來更新圓餅圖了。</p><pre><code class="javascript">function columnClick() {  const { color, points, name } = event.point.series;  let data = points.map((point, index) =&gt; ({    y: point.y,    color: rgbToRgba(color, 1 - index * 0.05),    name: point.category  }));  pieChart.series[0].setData(data);  pieChart.setTitle({ text: `${name}年齡佔比` });};</code></pre><br/><br/><h4 id="6-返回觀看整體佔比"><a href="#6-返回觀看整體佔比" class="headerlink" title="6. 返回觀看整體佔比"></a>6. 返回觀看整體佔比</h4><p>最後，把按鈕也加上原生的 <code>click</code> 事件，並在回呼函式中將圓餅圖改回最初的設定內容就大公告成了！</p><pre><code class="javascript">const overview = document.querySelector(&#39;.overview&#39;);overview.addEventListener(&quot;click&quot;, function() {  pieChart.series[0].setData(piePoints);  pieChart.setTitle({ text: `公司部門人數佔比` })});</code></pre><p><br/><br/></p><p>今天的範例比較著重在「事件屬性」和「方法」的使用，是否有幫助大家熟悉使用呢？另外如果對於「主題設定」、「繪圖區設定」、「格式屬性」來不太理解，也可以利用這個範例來複習一下。</p><p>接著明天，要用同一個資料案例來示範「雙層圓餅圖」的實作技巧。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10249008" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/JjXqYyz&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 其他實用 Method</title>
    <link href="https://maxleebk.com/2020/10/04/highcharts-20/"/>
    <id>https://maxleebk.com/2020/10/04/highcharts-20/</id>
    <published>2020-10-04T03:47:00.000Z</published>
    <updated>2021-09-20T21:55:45.109Z</updated>
    
    <content type="html"><![CDATA[<p>Highcharts 的方法（Method）當然不止昨天介紹的「資料更新」這種類型，還有很多方便好用的 Method，而且有了它們，我們就可以在頁面的其他程式邏輯中操作圖表，讓圖表和網頁更密切的結合。</p><hr><h2 id="全域-Method"><a href="#全域-Method" class="headerlink" title="全域 Method"></a>全域 Method</h2><br/><p>當我們在網頁中引入 Highcharts 時，<code>window</code> 底下就會被註冊一個 <code>Highcharts</code> 物件，裡面會有許多函式可以使用，我習慣叫它們「全域方法」，因為你不需要建立圖表就可以在網頁中的任何位置呼叫它們，像是最重要的<code>Highcharts.chart()</code> 就是其中一個全域方法。</p><pre><code class="javascript">console.log(window.Highcharts);Highcharts.chart(container, options); // 建立一個新的圖表Highcharts.setOptions(options);       // 主題設定(全域性設定)</code></pre><p>而除了 <code>chart()</code>、<code>setOptions()</code> 這些核心函式外，<code>Highcharts</code> 底下其實還有很多輔助類型的函式供我們使用，像是在「格式化屬性」中介紹的 <code>numberFormat()</code> 就屬於輔助性的函式，而下面要介紹的都是屬於這類的 Method。</p><p><br/><br/></p><h4 id="Highcharts-arrayMax-data-Highcharts-arrayMin-data"><a href="#Highcharts-arrayMax-data-Highcharts-arrayMin-data" class="headerlink" title="# Highcharts.arrayMax(data) / Highcharts.arrayMin(data)"></a># Highcharts.arrayMax(data) / Highcharts.arrayMin(data)</h4><p><code>data: Array</code></p><p>這兩個 Method 非常的方便，可以在一組陣列裡找到最大／最小的值並將它返回。</p><pre><code class="javascript">console.log(Highcharts.arrayMax([3, 9, 4, 11, 2])); // 11</code></pre><br/><br/><h4 id="Highcharts-fireEvent-el-event"><a href="#Highcharts-fireEvent-el-event" class="headerlink" title="# Highcharts.fireEvent(el, event)"></a># Highcharts.fireEvent(el, event)</h4><p><code>el: targetObject</code> <code>event: String</code> </p><p>這個 Method 可以讓你主動觸發事件，第一個參數要傳入要觸發事件的目標，第二個參數則是事件名稱。</p><pre><code class="javascript">function clickHandle() {  console.log(&quot;click fire&quot;);};var myChart = Highcharts.chart(container, {  series: [{ data: [1,2,3], events: clickHandle }]        });Highcharts.fireEvent(myChart.series[0], &quot;click&quot;);// &quot;click fire&quot;</code></pre><br/><br/><h4 id="Highcharts-merge-obj-obj-…"><a href="#Highcharts-merge-obj-obj-…" class="headerlink" title="# Highcharts.merge(obj, obj,…)"></a># Highcharts.merge(obj, obj,…)</h4><p><code>obj: Object</code> </p><p>你可用這個 Method 來把多個物件進行深層合併，就像主題設定、資料更新 Method 作的事情一樣。</p><pre><code class="javascript">let obj1 = { a: 1, b: { x: 5, y: 10 } };let obj2 = { b: { z: 15 }, c: 2 };let obj3 = { a: 10, c: 20, d: 3 };let newObj = Highcharts.merge(obj1, obj2, obj3);// { a: 10, b: { x: 5, y: 10, z: 15}, c: 20, d: 3 }</code></pre><br/><blockquote><p>全域方法還有不少，但這邊就介紹個功能比較實用的，想看全部可以到  <strong><a href="https://api.highcharts.com/class-reference/Highcharts#toc12" target="_blank" rel="noopener">官方文件</a></strong>。</p></blockquote><hr><h2 id="整體圖表-Method"><a href="#整體圖表-Method" class="headerlink" title="整體圖表 Method"></a>整體圖表 Method</h2><br/><blockquote><p>整體圖表的 Method 昨天有介紹過了，必須要先用 <code>Highcharts.chart()</code> 建立一個圖表後，才能透過「圖表物件」去呼叫下面這些方法。</p></blockquote><br/><h4 id="chart-setSize-width-height"><a href="#chart-setSize-width-height" class="headerlink" title="# chart.setSize(width, height)"></a># chart.setSize(width, height)</h4><p><code>width: Number</code> <code>height: Number</code></p><p>這個 Method 可以改變圖表的寬高尺寸，單純卻實用的功能。</p><pre><code class="javascript">var chart = Highcharts.chart(container, options);chart.setSize(800, 500);chart.setSize(800); // 只更改寬度chart.setSize(undefined, 800); // 只更改高度</code></pre><br/><br/><h4 id="chart-setTitle-options-chart-setSubtitle-options"><a href="#chart-setTitle-options-chart-setSubtitle-options" class="headerlink" title="# chart.setTitle(options) / chart.setSubtitle(options)"></a># chart.setTitle(options) / chart.setSubtitle(options)</h4><p><code>options: Object</code></p><p>這兩 Method 是用來更新主標題／副標題的設定的，只要把想更新的設定物件作為參數傳入即可。</p><pre><code class="javascript">var chart = Highcharts.chart(container, options);chart.setTitle({  text: &quot;新的標題文字&quot;,  style: { color: &quot;red&quot; }});</code></pre><br/><br/><h4 id="chart-destroy"><a href="#chart-destroy" class="headerlink" title="# chart.destroy()"></a># chart.destroy()</h4><p>如果你想要將一整個圖表移除可以呼叫這個 Method。</p><pre><code class="javascript">var chart = Highcharts.chart(container, options);chart.destroy();</code></pre><hr><h2 id="數據列-Method"><a href="#數據列-Method" class="headerlink" title="數據列 Method"></a>數據列 Method</h2><br/><blockquote><p>數據列 Method 也和昨天說明的一樣，必須要取得你要操作的「數據列物件」後才能呼叫其方法。</p></blockquote><br/><h4 id="series-setVisible-visible"><a href="#series-setVisible-visible" class="headerlink" title="# series.setVisible(visible)"></a># series.setVisible(visible)</h4><p><code>visible: Boolean|undefined</code></p><p>這個 Method 可以用來顯示或隱藏數據列，傳入 <code>true</code> 作為參數則顯示，傳入 <code>false</code> 則隱藏，如果不傳參就會自動進行切換。</p><pre><code class="javascript">var chart = Highcharts.chart(container, {  series: [{ data: [1, 2, 3] }]});chart.series[0].setVisible(false); // 隱藏，等同 hide()chart.series[0].setVisible(true); // 顯示，等同 show()chart.series[0].setVisible(); // 自動切換 顯示&lt;=&gt;隱藏</code></pre><br/><br/><h4 id="series-getName"><a href="#series-getName" class="headerlink" title="# series.getName()"></a># series.getName()</h4><p>一個很簡單的 Method，呼叫後可以取得該數據列的名字。</p><pre><code class="javascript">var chart = Highcharts.chart(container, {  series: [    { name: &quot;數據列A&quot;, data: [1, 2, 3] },    { name: &quot;數據列B&quot;, data: [1, 2, 3] }  ]});let result = chart.series.map(series =&gt; series.getName());// [&quot;數據列A&quot;, &quot;數據列B&quot;]</code></pre><br/><br/><h4 id="series-is-type"><a href="#series-is-type" class="headerlink" title="# series.is(type)"></a># series.is(type)</h4><p><code>visible: String</code></p><p>也是一個很單純的 Method，可以幫你判斷一組數據列的類型，例如以 <code>&quot;column&quot;</code> 作為參數，便會判斷此數據列是否為柱狀圖並回傳布林值。</p><pre><code class="javascript">var chart = Highcharts.chart(container, {  chart: { type: &quot;column&quot; }  series: [    { type: &quot;line&quot;, data: [1, 2, 3] },    { data: [1, 2, 3] }  ]});let result = chart.series.map(series =&gt; series.is(&quot;column&quot;));// [false, true]</code></pre><hr><h2 id="數據點-Method"><a href="#數據點-Method" class="headerlink" title="數據點 Method"></a>數據點 Method</h2><br/><blockquote><p>數據點 Method 也是一樣，必須要取得你要操作的「數據點物件」後才能呼叫其方法。</p></blockquote><br/><h4 id="point-getClassName"><a href="#point-getClassName" class="headerlink" title="# point.getClassName()"></a># point.getClassName()</h4><p>假如你有為數據點設定 <code>className</code> 屬性，那你就可以透過這個 Method 來得到其屬性值。</p><pre><code class="javascript">var chart = Highcharts.chart(container, {  series: [{     data: [      {className: &quot;point-1&quot;, y: 10},      {className: &quot;point-2&quot;, y: 20},    ]   }]});let result = chart.series[0].data.map(point =&gt; point.getClassName());// [&quot;point-1&quot;, &quot;point-2&quot;]</code></pre><br/><br/><h4 id="point-onMouseOver"><a href="#point-onMouseOver" class="headerlink" title="# point.onMouseOver()"></a># point.onMouseOver()</h4><p>這個 Method 可以主動出發數據點的 <code>mouseOver</code> 事件，而且就算你沒有設定事件屬性，依然會使數據點進入聚焦狀態。</p><pre><code class="javascript">chart.series[0].data[0].onMouseOver();</code></pre><br/><br/><h4 id="point-select"><a href="#point-select" class="headerlink" title="# point.select()"></a># point.select()</h4><p>這個 Method 可以使用來選取數據點，如果有設定 <code>select</code> 事件的話也會被觸發，而且可以無視 <code>allowPointSelect</code> 的設定。</p><pre><code class="javascript">var chart = Highcharts.chart(container, {  series: [{    allowPointSelect: false,    data: [1, 2, 3, 4]  }]});chart.series[0].data[3].select(); // 依然可以選取數據點</code></pre><p><br/><br/></p><p>今天介紹的 Method 其實不多，而且使用方式也不是非常複雜，所以就不特別附上範例了。</p><p>隨著這個章節的結束，我們也算是掌握了 Highcharts 的核心基礎，包括圖表元素、主題、響應式設定..等「基本API」，以及事件處理、圖表操作的「進階API」。而後面幾天的時間則會開始分享一些小技巧以及進階圖表的實作，透過簡單的範例來讓大家更熟悉 Highcharts 的應用。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10248806" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;Highcharts 的方法（Method）當然不止昨天介紹的「資料更新」這種類型，還有很多方便好用的 Method，而且有了它們，我們就可以在頁面的其他程式邏輯中操作圖表，讓圖表和網頁更密切的結合。&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id=&quot;全域-Method&quot;&gt;&lt;a href=
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 資料更新 Method</title>
    <link href="https://maxleebk.com/2020/10/03/highcharts-19/"/>
    <id>https://maxleebk.com/2020/10/03/highcharts-19/</id>
    <published>2020-10-03T02:52:00.000Z</published>
    <updated>2021-09-20T21:55:45.105Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/qBZvgGv" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/qBZvgGv</a></strong></p></blockquote><p>在 Highcharts 中呢，除了五花八門的設定屬性之外，還有不少內建的函式可以操作圖表，這種函式通常都稱之為「方法（Method）」。</p><p>圖表最重要的目的在於呈現資料，而資料在網頁中不僅重要卻還時常變化，時常都會利用非同步請求來取得資料，而在請求回應後就需要有辦法改變圖表中的資料或設定，所以今天就是要來專門講講這些負責 <strong>更新圖表資料或設定</strong> 的 Method。</p><hr><h2 id="資料更新-Method"><a href="#資料更新-Method" class="headerlink" title="資料更新 Method"></a>資料更新 Method</h2><br/><p>現在繪製圖表對我們來說已經駕輕就熟了，但目前圖表都是靜態的，頂多綁個事件增加一下互動功能，但假如今天想要做一個隨時更新資料的「動態圖表」好像就辦不到了。好在 Highcharts 提供了一些 Method 來讓我們可以在 <strong>圖表載入完畢後</strong> 還能操作它。</p><blockquote><p>昨天在事件屬性中有提到的 <code>show()</code>、<code>update()</code>…等等都屬於 Method，不過今天先專注在「更新」這類的 Method 上。</p></blockquote><pre><code class="javascript">// 創建一個圖表，設定內容省略var chart = Highcharts.chart(container, options);// 圖表的更新 Methodchart.update();chart.addSeries();// 數據列的更新 Methodchart.series[0].update();chart.series[0].remove();chart.series[0].setData();chart.series[0].addPoint();chart.series[0].removePoint();// 數據點的更新 Methodchart.series[0].data[0].update();chart.series[0].data[0].remove();</code></pre><br/><p>不曉得大家有沒有好奇過，為什麼在創建圖表的時候要用一個變數來儲存呢？原來在創建圖表的時候，Highcharts 會建立一個圖表的 <strong>實例(Instance)</strong>，其實也就是前面提過的「圖表物件」，裡面也包含了數據列、數據點、座標軸等等區塊的實例／物件。</p><p>而每個實例裡就會有它們專屬的 Method，當要使用時就必須從中索引後呼叫，所以才需要用變數接住實例，好方便我們呼叫。</p><hr><h2 id="整體圖表更新-Method"><a href="#整體圖表更新-Method" class="headerlink" title="整體圖表更新 Method"></a>整體圖表更新 Method</h2><br/><blockquote><p>將圖表實例儲存於變數中是必要的，以此才能選取到該圖表並呼叫其方法。</p></blockquote><br/><h4 id="chart-update-options"><a href="#chart-update-options" class="headerlink" title="# chart.update(options)"></a># chart.update(options)</h4><p><code>options: Object</code></p><p>這個 Method 可以更新圖表內的任何設定，包括數據列、座標軸等等都能夠更新，而使用方式便是將要更新<br>的 <code>options</code> 物件以參數傳入，而 Highcharts 一樣會幫你做深層的合併，所以你不需要把未更動的設定再撰寫一遍。</p><pre><code class="javascript">var chart = Highcharts.chart(container, {  title: { text: &quot;我的圖表&quot; },  credits: { enabled: false },  series: [    { name: &quot;數據列1&quot;, data: [1,2,3] },    { name: &quot;數據列2&quot;, data: [4,5,6] }  ]        });// 只有第一組數據列會被更新，但第二組並不會消失chart.update({  title: { text: &quot;我的圖表(已更新)&quot; },  series: [{ data: [10,20,30] }]});</code></pre><br/><br/><h4 id="chart-addSeries-series"><a href="#chart-addSeries-series" class="headerlink" title="# chart.addSeries(series)"></a># chart.addSeries(series)</h4><p><code>series: Object</code></p><p>昨天其實有簡單帶到這個 Method，它可以在圖表中新增一組新的數據列，只要把新數據列的設定物件傳進參數即可。</p><pre><code class="javascript">chart.addSeries({  name: &quot;新數據列&quot;,  dataLabels: { enabled: true },  data: [[10,20], [30,40], [50,60]]});</code></pre><hr><h2 id="數據列更新-Method"><a href="#數據列更新-Method" class="headerlink" title="數據列更新 Method"></a>數據列更新 Method</h2><br/><blockquote><p>要呼叫數據列的 Method 需要透過圖表實例裡的 <code>series</code> 陣列裡去找到你要操作的數據列。</p></blockquote><br/><h4 id="series-update-options"><a href="#series-update-options" class="headerlink" title="# series.update(options)"></a># series.update(options)</h4><p><code>options: Object</code></p><p>和前面的 <code>chart.update()</code> 是一樣概念，將你要更新的數據列設定物件作為參數傳入函式中，即可改變數據列的設定。</p><pre><code class="javascript">var chart = Highcharts.chart(container, {  series: [    { name: &quot;數據列1&quot;, data: [1,2,3] },    { name: &quot;數據列2&quot;, data: [4,5,6] }  ]});// 第二組數據列將被更新chart.series[1].update({  name: &quot;數據列2(被更新)&quot;,  color: &quot;red&quot;,  data: [40, 50, 60]});</code></pre><br/><br/><h4 id="series-remove"><a href="#series-remove" class="headerlink" title="# series.remove()"></a># series.remove()</h4><p>這個 Method 就單純很多，選取你要的數據列後呼叫這個方法，該數據點便會從圖表中移除。</p><pre><code class="javascript">chart.series[0].remove();</code></pre><br/><br/><h4 id="series-setData-data"><a href="#series-setData-data" class="headerlink" title="# series.setData(data)"></a># series.setData(data)</h4><p><code>data: Array</code></p><p>如果僅僅只是要改變數據列的 <code>data</code> 屬性，那可以選擇使用這個 Method，而不需要使用 <code>update()</code>，呼叫時只要傳入新的數據點陣列即可。</p><pre><code class="javascript">var chart = Highcharts.chart(container, {  series: [{ data: [1,2,3] }]});// 數據列的數據將會改變chart.series[0].setData([4,5,6]);</code></pre><br/><br/><h4 id="series-addPoint-point"><a href="#series-addPoint-point" class="headerlink" title="# series.addPoint(point)"></a># series.addPoint(point)</h4><p><code>point: Number|Array|Object</code></p><p>看過前面的 <code>addSeries()</code> 之後應該很好理解，就是在你要操作的數據列中新增一個數據點，而傳入的參數可以接受任何形式的數據點格式，形式種類之前在「數據點設定」的章節中有介紹過。</p><pre><code class="javascript">chart.series[0].addPoint({x: 10, y: 10});</code></pre><br/><br/><h4 id="series-removePoint-index"><a href="#series-removePoint-index" class="headerlink" title="# series.removePoint(index)"></a># series.removePoint(index)</h4><p><code>index: Number</code></p><p>在你呼叫這個 Method 時，會從你正在操作的數據列中移除一個數據點，而你必須傳入該數據點的索引值，Highcharts 才知道要移除的是哪一個。</p><pre><code class="javascript">var chart = Highcharts.chart(container, {  series: [{ data: [6,7,8,9,10] }]});// 第三個數據點將會被移除chart.series[0].removePoint(2);</code></pre><hr><h2 id="數據點更新-Method"><a href="#數據點更新-Method" class="headerlink" title="數據點更新 Method"></a>數據點更新 Method</h2><br/><blockquote><p>要呼叫數據點的 Method 需要透過圖表實例裡的 <code>series.data</code> 陣列或 <code>series.points</code> 陣列裡去找到你要操作的數據點。</p></blockquote><br/><h4 id="point-update-options"><a href="#point-update-options" class="headerlink" title="# point.update(options)"></a># point.update(options)</h4><p><code>options: Number|Array|Object</code></p><p>和前面的所有的 <code>update</code> 方法都是一樣的，將你要更新的數據點設定作為參數傳入函式中，即可改變數據點的設定，不過此 Method 的參數可以接受任何數據點設定格式。</p><pre><code class="javascript">var chart = Highcharts.chart(container, {  series: [{ data: [10, 11, 12, 13, 14] }]});// 第四個數據點將被更新chart.series[0].data[3].update({ y: 20, color: &quot;red&quot; });</code></pre><br/><br/><h4 id="point-remove"><a href="#point-remove" class="headerlink" title="# point.remove()"></a># point.remove()</h4><p>也是很單純的一個 Method，選取好要操作的數據點後並呼叫函式，便會將該數據點從數據列中移除。</p><pre><code class="javascript">chart.series[0].data[3].remove();</code></pre><hr><h2 id="指定選取"><a href="#指定選取" class="headerlink" title="指定選取"></a>指定選取</h2><br/><p>我們把今天的更新 Method 都認識完了，不過卻發現，若是想要操作數據列或數據點似乎稍嫌麻煩，必須先知道他們的索引值，還要一層層往裡面找才能選到，所以這邊要額外介紹兩個設定屬性：</p><br/><br/><h4 id="series-id-series-data-id"><a href="#series-id-series-data-id" class="headerlink" title="# series.id / series.data.id"></a># series.id / series.data.id</h4><p><code>型別: String</code> <code>預設: undefined</code></p><p>這兩個屬性可以為數據列／數據點設定 ID Name，這樣就可以透過 <code>chart.get()</code> 這個 Method 來直接選取它們。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  series: [{     id: &quot;mySeries&quot;,    data: [1, 2, {y: 3, id: &quot;myPoint&quot; }]  }]});let series = myChart.get(&quot;mySeries&quot;);let point = myChart.get(&quot;myPoint&quot;);</code></pre><hr><p>今天認識的這些 Method 都可以在圖表載入完成後去操作圖表，好處在於可以動態的更新圖表中的資料或設定，讓圖表可以跟整個網頁互動，或是利用非同步事件來做到下面這樣的效果，希望大家吸收的還順利，明天會繼續介紹其他的常用 Method。</p><img src="dynamic.gif" style="max-width: 600px; margin: 24px auto;" /><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10248326" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/qBZvgGv&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 事件屬性</title>
    <link href="https://maxleebk.com/2020/10/02/highcharts-18/"/>
    <id>https://maxleebk.com/2020/10/02/highcharts-18/</id>
    <published>2020-10-02T03:22:00.000Z</published>
    <updated>2021-09-20T21:55:45.105Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/bGpzoZr" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/bGpzoZr</a></strong><br>避免文章篇幅過長，沒辦法每個屬性都利用圖片示意，所以記得善用範例來測試不太了解的屬性。</p></blockquote><p>第一天就有跟各位說過，Highcharts 除了豐富的圖表設定外，另一大看點就是可以做到圖表的事件監聽，讓我們的圖表不僅僅只是展示資料，更是一個可以跟使用者互動的介面，所以今天就要來好好講講「事件屬性」。</p><hr><h2 id="事件屬性"><a href="#事件屬性" class="headerlink" title="事件屬性"></a>事件屬性</h2><br/><p>事件屬性和格式化屬性一樣，分佈在各個圖表區塊當中，不過基本上「圖表事件」、「數據列事件」、「數據點事件」這三個就能囊括八成以上的應用了，下面就大致先讓大家看看有哪些事件名稱吧。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  chart: {    events: { // 圖表整體事件屬性      load: function() {},      redraw: function() {},      render: function() {},      addSeries: function() {},      click: function() {}    }  },  series: [{    events: { // 數據列事件屬性，繪圖區設定亦同      click: function() {},      mouseOver: function() {},      mouseOut: function() {},      show: function() {},      hide: function() {},      legendItemClick: function() {}    },      data: [{      events: { // 數據點事件屬性        click: function() {},        mouseOver: function() {},        mouseOut: function() {},        select: function() {},        unselect: function() {},        update: function() {},        remove: function() {}      }    }]  }]});</code></pre><p>其實這些事件屬性都不會很複雜，有部分跟 DOM 元素的事件也大同小異，而且設定上也很簡單，就是給予一個回呼函式 (Call-Back) 就好了，未來只要事件觸發了，Highcharts 就會幫你執行函式囉。</p><br/><br/><h4 id="this-和-event-物件"><a href="#this-和-event-物件" class="headerlink" title="# this 和 event 物件"></a># this 和 event 物件</h4><p>在一般 JavaScript 的事件中，<code>this</code> 代表的是被賦予事件監聽的那個 DOM 元素，在 Highcharts 也是類似的，<code>this</code> 代表的就是那個被設定事件的圖表物件、數據列物件或數據點物件。</p><p>相同地，你可以透過參數的設定去接住回呼函式中被 Highcharts 傳入的 <code>event</code> 物件，而不同的事件類型，<code>event</code> 物件會提供不同的屬性內容。</p><pre><code class="javascript">events: {  click: function(event) {    console.log(this, event)  }}</code></pre><p>透過 <code>this</code> 與 <code>event</code> 所提供的內容，我們就可以利用這些資訊來達到許多複雜互動與操作。</p><br/><blockquote><p>由於實在是很難特別想一些應用來給大家做演示，所以今天主要會介紹的是事件的觸發時機以及 <code>event</code> 物件的資料內容。</p></blockquote><hr><h2 id="圖表整體事件"><a href="#圖表整體事件" class="headerlink" title="圖表整體事件"></a>圖表整體事件</h2><br/><blockquote><p>圖表整體事件中，<code>this</code> 會是「圖表物件」，內容包含了該圖表的各種屬性內容與方法。</p></blockquote><br/><h4 id="chart-events-load"><a href="#chart-events-load" class="headerlink" title="# chart.events.load"></a># chart.events.load</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當圖表載入完成後觸發，<code>event</code> 物件中則沒有什麼特別的屬性，倒是 <code>event.target</code> 和 <code>this</code> 一樣，提供的是「圖表物件」。</p><br/><br/><h4 id="chart-events-redraw"><a href="#chart-events-redraw" class="headerlink" title="# chart.events.redraw"></a># chart.events.redraw</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當圖表重新繪圖時觸發，包括「尺寸改變」、「數據列、數據點或座標軸的變更」，<code>event</code> 物件的內容則與 <code>load</code> 事件相同。</p><br/><br/><h4 id="chart-events-render"><a href="#chart-events-render" class="headerlink" title="# chart.events.render"></a># chart.events.render</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>這個事件觸發時機等於 <code>load</code> 事件加上 <code>redraw</code> 事件，而 <code>event</code> 物件的內容也與它們相同。</p><br/><br/><h4 id="chart-events-addSeries"><a href="#chart-events-addSeries" class="headerlink" title="# chart.events.addSeries"></a># chart.events.addSeries</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>這個事件的觸發時機比較特別，當有一個新的數據列被加進圖表時會觸發，也就是使用 <code>addSeries()</code> 這個方法的時候會觸發，而它的 <code>event</code> 物件中有一個 <code>options</code> 屬性，有著該次加入的數據列內容。</p><p>另外你也可以在函式中返回 <code>false</code> 就可以阻止這次的新增，如果成功新增也會觸發 <code>redraw</code> 和 <code>render</code> 事件。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  chart: {    events: {      addSeries: function(event) {        console.log(event.options)        return event.options.data.length &gt;= 5;        // 如果要被加入的數據列少於五個數據點，就不加入      }    }  }});myChart.addSeries({  name: &quot;newSeries&quot;,  data: [12, 15, 12, 5]})// console: { name: &quot;newSeries&quot;, data: [12, 15, 12, 5] }</code></pre><br/><br/><h4 id="chart-events-click"><a href="#chart-events-click" class="headerlink" title="# chart.events.click"></a># chart.events.click</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當你點擊「繪圖區」時會觸發這個事件，它的 <code>event</code> 物件除了有滑鼠事件的相關屬性外，還有提供「座標軸物件」，甚至還有「該點擊處」在圖表中所代表的Ｘ／Ｙ軸數值。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  chart: {    events: {      click: function(event) {        // 拿到點擊處的Ｘ／Ｙ數值，並加進數據列當中        this.series[0].addPoint([          event.xAxis[0].value,          event.yAxis[0].value,        ])      }    }  }});</code></pre><hr><h2 id="數據列事件"><a href="#數據列事件" class="headerlink" title="數據列事件"></a>數據列事件</h2><br/><blockquote><p>數據列事件中，<code>this</code> 會是「數據列物件」，內容包含了該數據列的各種屬性內容與方法。</p></blockquote><br/><h4 id="series-events-click"><a href="#series-events-click" class="headerlink" title="# series.events.click"></a># series.events.click</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當數據列被點擊時會觸發這個事件，由於是滑鼠事件，所以 <code>event</code> 中會有鼠標的相關資訊，另外 <code>event.point</code> 會提供你點擊時，處於聚焦狀態的數據點之「數據點物件」。</p><img src="seriesClick.png" style="max-width: 800px; margin: 16px auto 0;" /><br/><br/><h4 id="series-events-mouseOver"><a href="#series-events-mouseOver" class="headerlink" title="# series.events.mouseOver"></a># series.events.mouseOver</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當鼠標使數據列聚焦時就會觸發這個事件，要注意的是有一些圖表類型 (例如折線圖)，有預設開啟 <code>series.stickyTracking</code> 這個屬性，導致鼠標進入繪圖區時，一定會使數據列被聚焦。</p><p>它的 <code>event</code> 物件比較沒那麼特殊，當中的 <code>target</code> 屬性和 <code>this</code> 一樣，都是「數據列物件」。</p><img src="seriesOver.png" style="max-width: 800px; margin: 16px auto 0;" /><br/><br/><h4 id="series-events-mouseOut"><a href="#series-events-mouseOut" class="headerlink" title="# series.events.mouseOut"></a># series.events.mouseOut</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當鼠標使數據列從聚焦轉為失焦時就會觸發，其他內容與 <code>mouseOver</code> 都一樣。</p><br/><br/><h4 id="series-events-show"><a href="#series-events-show" class="headerlink" title="# series.events.show"></a># series.events.show</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當你將數據列從隱藏狀態改為顯示狀態時，就會觸這個事件，另外這個動作也會同時觸發前面介紹的 <code>redraw</code> 和 <code>render</code> 事件。</p><p>而它的 <code>event</code> 物件也是只有 <code>target</code> 屬性而已，內容為「數據列物件」。</p><br/><br/><h4 id="series-events-hide"><a href="#series-events-hide" class="headerlink" title="# series.events.hide"></a># series.events.hide</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>就是 <code>show</code> 的相反版本，其餘並無不同。</p><blockquote><p>大部分都是透過點擊圖例來顯示／隱藏數據列，但你也可以使用 <code>show()</code>、<code>hide()</code> 這兩個數據列方法來操作，可見本章節範例。</p></blockquote><br/><br/><h4 id="series-events-legendItemClick"><a href="#series-events-legendItemClick" class="headerlink" title="# series.events.legendItemClick"></a># series.events.legendItemClick</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>這個屬性是你只要點擊圖例就會觸發，因此觸發順序應該會是 <code>legendItemClick</code> 才接到 <code>show</code> 或 <code>hide</code>，另外你還可以在回呼函式中返回一個 <code>false</code>，那就會使本次點擊圖例的效果失效。</p><p>它的 <code>event</code> 物件比前兩者多了一個 <code>browserEvent</code>，內容為滑鼠事件的相關屬性。</p><pre><code class="javascript">series: [{  events: {    legendItemClick: function(event){      // event.target.visible 為數據列目前是否顯示      // 會使數據點只許隱藏，卻無法再次顯示      return event.target.visible;    }   }}] </code></pre><br/><br/><hr><h2 id="數據點事件"><a href="#數據點事件" class="headerlink" title="數據點事件"></a>數據點事件</h2><br/><blockquote><p>數據點事件中，<code>this</code> 會是「數據點物件」，內容包含了該數據點的各種屬性內容與方法。</p></blockquote><br/><h4 id="series-data-events-click"><a href="#series-data-events-click" class="headerlink" title="# series.data.events.click"></a># series.data.events.click</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>會在點擊數據點時觸發，要注意的是，只要有數據點是「聚焦狀態」，點擊到數據列的任一位置都會觸發此事件，也就是說鼠標並非要在「點」上。而它的 <code>event</code> 物件一樣有滑鼠事件的相關屬性，且 <code>point</code> 屬性中也有該數據點的「數據點物件」，和數據列的點擊事件只差在 <code>this</code> 的不同。</p><br/><br/><h4 id="series-data-events-mouseOver"><a href="#series-data-events-mouseOver" class="headerlink" title="# series.data.events.mouseOver"></a># series.data.events.mouseOver</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當鼠標使數據點聚焦時就觸發，依然受到 <code>series.stickyTracking</code> 屬性影響，而 <code>event</code> 物件也是只有 <code>target</code> 屬性，內容與 <code>this</code> 一樣是「數據點物件」。</p><br/><br/><h4 id="series-data-events-mouseOut"><a href="#series-data-events-mouseOut" class="headerlink" title="# series.data.events.mouseOut"></a># series.data.events.mouseOut</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當鼠標使數據點從聚焦轉為失焦時觸發，其他內容與 <code>mouseOver</code> 都一樣。</p><br/><br/><h4 id="series-data-events-select"><a href="#series-data-events-select" class="headerlink" title="# series.data.events.select"></a># series.data.events.select</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>在你選取了數據點時會觸發這個事件，此事件必須在 <code>series.allowPointSelect</code> 開啟的狀態下才能作用，<code>event</code> 物件的內容和 <code>mouse</code> 系列相同。此外你可以透過回傳 <code>false</code> 來取消選取動作：</p><pre><code class="javascript">data: [{  y: 3,  events: {    select: function(){      // 這個數據點將無法被選取      return this.y &gt; 5     }   }}]</code></pre><br/><br/><h4 id="series-data-events-unselect"><a href="#series-data-events-unselect" class="headerlink" title="# series.data.events.unselect"></a># series.data.events.unselect</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當數據點被取消選取時觸發，其餘特性均與 <code>select</code> 相同。</p><br/><br/><h4 id="series-data-events-update"><a href="#series-data-events-update" class="headerlink" title="# series.data.events.update"></a># series.data.events.update</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當數據點被更新時會觸發事件，它與 <code>addSeries</code> 很類似，<code>event</code> 物件中一樣有 <code>options</code> 屬性來提供這次要更新的內容，並且也可以在函式中返回 <code>false</code> 來阻止這次更新，且數據點成功更新也會觸發 <code>redraw</code> 和 <code>render</code> 事件。</p><br/><blockquote><p>要更新數據點要使用 <code>update()</code> 這個數據點方法，請見本章節範例。</p></blockquote><br/><br/><h4 id="series-data-events-remove"><a href="#series-data-events-remove" class="headerlink" title="# series.data.events.remove"></a># series.data.events.remove</h4><p><code>型別: Function</code> <code>預設: undefined</code></p><p>當數據點被移除時會觸發，<code>event.target</code> 和 <code>this</code> 中都會有此次被刪除的數據點之「數據點物件」，且一樣可以返回 <code>false</code> 來阻止這次刪除，且數據點成功刪除也會觸發 <code>redraw</code> 和 <code>render</code> 事件。</p><br/><blockquote><p>要更新數據點要使用 <code>remove()</code> 這個數據點方法，請見本章節範例。</p></blockquote><p><br/><br/></p><p>今天把比較主力的幾個事件屬性介紹完畢，非常強烈建議大家到今天的範例裡去玩玩看，我準備的應該算很周全，可以讓大家知道各件事的機制以及觸發順序，明天的話則是要跟大家介紹 Highcharts 裡一些更新資料與設定的方法 (method)。</p><p>像是今天就有稍微帶到 <code>addSeries()</code> 和 <code>update()</code>…等等，在下個章節中都會比較詳細的介紹它們。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10247862" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/bGpzoZr&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 響應式設定</title>
    <link href="https://maxleebk.com/2020/10/01/highcharts-17/"/>
    <id>https://maxleebk.com/2020/10/01/highcharts-17/</id>
    <published>2020-10-01T05:13:00.000Z</published>
    <updated>2021-09-20T21:55:45.005Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/NWNeevP" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/NWNeevP</a></strong></p></blockquote><p>近年來響應式網站已成為主流，尤其當網站需要支援行動裝置的使用時，RWD 的設定勢必要考慮進去，好加在 Highcharts 本來就對各種瀏覽器、裝置、系統有很高的相容性，而且還提供了「響應式設定」讓我們隨視窗大小的改變而修改圖的設定。</p><hr><h2 id="響應式設定-基本介紹"><a href="#響應式設定-基本介紹" class="headerlink" title="響應式設定 - 基本介紹"></a>響應式設定 - 基本介紹</h2><br/><p>一般在設計響應式網站時，肯定會使用 CSS 的媒體查詢 (Media queries) 來規範元素樣式要在什麼樣的視窗尺寸下做何種變化，而 Highcharts 的「響應式設定」也是類似原理。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  responsive: { // 響應式設定    rules: [{      condition: {},     // 條件設定      chartOptions: {}   // 圖表options物件    }]   }});</code></pre><hr><h2 id="響應式設定-條件設定"><a href="#響應式設定-條件設定" class="headerlink" title="響應式設定 - 條件設定"></a>響應式設定 - 條件設定</h2><br/><p>Media queries 在撰寫時都會相下面這樣去訂定變化的條件時機，其中 <code>max-width:790px</code> 就是樣式的轉變時機。</p><pre><code class="css">/* 在視窗寬度小於 790px 時，做以下變化 */@media screen and (max-width:790px) {   color: red;  border: 1px solid #292929;}</code></pre><p>而 Highcharts 的「響應式設定」也是一樣的，同樣要定義圖表設定變化的條件，而 <code>condition</code> 屬性可以幫我們做到這件事，不過…</p><br/><blockquote><p>Highcharts 監聽的並非視窗寬高，而是圖表本身的寬高，這點非常重要，千萬別搞錯了！</p></blockquote><br/><br/><h4 id="responsive-rules-condition-maxWidth"><a href="#responsive-rules-condition-maxWidth" class="headerlink" title="# responsive.rules.condition.maxWidth"></a># responsive.rules.condition.maxWidth</h4><p><code>型別: Number</code> <code>預設: undefined</code></p><p>當圖表的寬度小於這個屬性設定的值時，便會發生設定變化。</p><br/><br/><h4 id="responsive-rules-condition-maxHeight"><a href="#responsive-rules-condition-maxHeight" class="headerlink" title="# responsive.rules.condition.maxHeight"></a># responsive.rules.condition.maxHeight</h4><p><code>型別: Number</code> <code>預設: undefined</code></p><p>當圖表的寬度小於這個屬性設定的值時，便會發生設定變化。</p><br/><br/><h4 id="responsive-rules-condition-minWidth"><a href="#responsive-rules-condition-minWidth" class="headerlink" title="# responsive.rules.condition.minWidth"></a># responsive.rules.condition.minWidth</h4><p><code>型別: Number</code> <code>預設: 0</code></p><p>當圖表的寬度大於這個屬性設定的值時，便會發生設定變化。</p><br/><br/><h4 id="responsive-rules-condition-minHeight"><a href="#responsive-rules-condition-minHeight" class="headerlink" title="# responsive.rules.condition.minHeight"></a># responsive.rules.condition.minHeight</h4><p><code>型別: Number</code> <code>預設: 0</code></p><p>當圖表的高度大於這個屬性設定的值時，便會發生設定變化。</p><br/><br/><p>看完屬性的介紹後，應該會發現「響應式設定」真的就和 <code>@media</code> 一樣，只要將條件設定完畢，Highcharts 就會自動偵測圖表的大小了。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  responsive: {    rules: [{      // 當圖表寬度在 768 ~ 1280 之間，就會發生設定變化      condition: {        maxWidth: 1280,        minWidth: 768,      }    }]   }});</code></pre><hr><h2 id="響應式設定-圖表變化"><a href="#響應式設定-圖表變化" class="headerlink" title="響應式設定 - 圖表變化"></a>響應式設定 - 圖表變化</h2><br/><p>有了條件，剩下就是讓圖表產生改變了，這時候 <code>chartOptions</code> 屬性就是「響應式設定」中的主角了。</p><br/><h4 id="responsive-rules-chartOptions"><a href="#responsive-rules-chartOptions" class="headerlink" title="# responsive.rules.chartOptions"></a># responsive.rules.chartOptions</h4><p><code>型別: Object</code> <code>預設: undefined</code></p><p>物件內容就是你希望改變的圖表設定及其值，前面所有介紹過的圖表元素設定都可以改變！</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  responsive: {    rules: [{      condition: {}      chartOptions: {        chart: {},       // 圖表整體設定        credits: {},     // 版權標籤設定        title: {},       // 標題設定        subtitle: {},    // 副標題設定        caption: {},     // 圖表說明設定        colors: [],      // 顏色設定        xAxis: [{}],     // Ｘ座標軸設定        yAxis: [{}],     // Ｙ座標軸設定        legend: {},      // 圖例設定        tooltip: {},     // 提示框設定        plotOptions: {}, // 繪圖區設定        series: [{}]     // 數據列設定      }    }]   }});</code></pre><p>其實全部列出來才發現，我們已經認識了一大堆的圖表設定，而這些你全部都可以在 <code>chartOptions</code> 裡進行新的設定，而只要 <code>condition</code> 當中的條件發生了，圖表就會被套用這些設定。</p><hr><h2 id="響應式設定-實際使用"><a href="#響應式設定-實際使用" class="headerlink" title="響應式設定 - 實際使用"></a>響應式設定 - 實際使用</h2><br/><p>既然兩個屬性都知道如何設定了，那接下來就是實際運看看囉，今天就來做個手機市佔率的圓餅圖好了。</p><p>在之前的範例中，我們都會把容器的寬度給寫死，但這樣圖表就不會隨視窗改變大小了，所以這次的容器就不設定固定寬度了：</p><pre><code class="html">&lt;div id=&quot;container&quot;&gt;&lt;/div&gt;</code></pre><p>接著先把資料給準備好，然後用 <code>showInLegend</code> 屬性把圓餅圖的圖例打開，並且做一些細節的設定：</p><pre><code class="javascript">let phoneData = [  [&quot;蘋果&quot;, 30],  [&quot;三星&quot;, 29.8],  [&quot;realme&quot;, 9.2],  [&quot;OPPO&quot;, 7.2],  [&quot;vivo&quot;, 6.3],  [&quot;其他&quot;, 17.5]];</code></pre><pre><code class="javascript">var myChart = Highcharts.chart(container, {  chart: { type: &quot;pie&quot; },  title: { text: &quot;手機品牌市佔率&quot; },  credits: { enabled: false },  legend: {    align: &quot;center&quot;,    verticalAlign: &quot;middle&quot;,    layout: &quot;vertical&quot;,    floating: true,    x: 260,    itemMarginTop: 5,    itemMarginBottom: 5,    labelFormat: &quot;{name} {y}%&quot;  },  plotOptions: {    series: {      showInLegend: true,       dataLabels: { enabled: false }    }  },  series: [{ data: phoneData }]});</code></pre><img src="pie.png" style="max-width: 800px; margin: 24px auto;" /><p>這樣我們就有一張手機品牌市佔率的圓餅圖了，並且將圖例顯示在圓餅圖的右側，不過如果你有跟著做的話，就會發現當圖表的寬度隨著視窗縮小到一定程度時，圖例就會超出畫面而無法完整顯示，為了解決這樣的「破版」，就來增加「響應式設定」吧！</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  //..省略原設定  responsive: {    rules: [      {        condition: {  maxWidth: 650 },        chartOptions: {          legend: {            verticalAlign: &quot;bottom&quot;,            layout: &quot;horizontal&quot;,            floating: false,            x: 0          }        }      },      {        condition: { maxWidth: 450 },        chartOptions: {          legend: { verticalAlign: &quot;top&quot; },        }      }    ]  }});</code></pre><p>是否有發現，我在 <code>responsive.rules</code> 增加的是兩組條件與設定呢？就如同 <code>@media</code> 一樣，「響應式設定」並非只能設立一個斷點，所以現在當圖表寬度小於 <code>650px</code> 以及 <code>450px</code> 的時候都會有一次改變，最後的成果就像下面這樣。</p><p><img src="legendChange.gif" alt=""></p><p><br/><br/></p><p>是不是覺得「響應式設定」還蠻有趣的呢？透過它我們可以做到很多的排版上的變化，讓任何尺寸的裝置都可順利的觀看圖表。</p><p>另外也要特別恭喜各位，因為到今天為止，我們已經把所有常見的「基本API」給介紹完了，而接下來的三天則會進入「進階API」的介紹，首當其衝的就是負責互動操作的「事件屬性」。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10247405" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/NWNeevP&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 主題設定</title>
    <link href="https://maxleebk.com/2020/09/30/highcharts-16/"/>
    <id>https://maxleebk.com/2020/09/30/highcharts-16/</id>
    <published>2020-09-30T01:30:00.000Z</published>
    <updated>2021-09-20T21:55:45.005Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/Vwaqvab" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/Vwaqvab</a></strong></p></blockquote><p>昨天在介紹到「語言設定」時有提到 <code>Highcharts.setOptions</code>， 說到它的功能是負責調整全域設定，讓整個網頁的圖表都受到影響，而今天要介紹的「主題設定」其實就是透過它來達成的。</p><hr><h2 id="主題設定"><a href="#主題設定" class="headerlink" title="主題設定"></a>主題設定</h2><br/><p>目前我們已經把七成的圖表區塊設定屬性給認識完了，基本上已經可以把 Highcharts 順利地運用在網頁中，但隨著頁面中的圖表越來越多，就會逐漸發現程式碼也變得越來越龐大。</p><p>由於我們在設計網頁時，總會有固定的風格、字型、顏色等等，所以會精心調整圖表的樣式細節，例如標題的字型樣式，圖例、提示框的顏色邊框等等。但是當我們想要把精心設定的樣式套用到每張圖表時，卻發現只能不斷寫著重複的程式碼。</p><pre><code class="javascript">var lineChart = Highcharts.chart(container, {  chart: {    type: &quot;line&quot;    borderWidth: 1,    borderColor: &quot;#ddd&quot;,    borderRadius: 4  }});var columnChart = Highcharts.chart(container, {  chart: {    type: &quot;column&quot;    borderWidth: 1,    borderColor: &quot;#ddd&quot;,    borderRadius: 4  }});</code></pre><p>就像上面這個簡單的案例，明明只是想要把每個圖表都加上邊框，卻要每張圖表都寫一堆重複的設定。這時候就可以使用 <code>Highcharts.setOptions</code> 來解決這種麻煩的窘境。</p><br/><p>首先要把每張圖表都會重複的部份抽出來，然後再透過 <code>Highcharts.setOptions</code> 進行設定，這樣以後每個圖表都只要設定那些不一樣地方就好了。</p><pre><code class="javascript">var theme = {  chart: {    borderWidth: 1,    borderColor: &quot;#ddd&quot;,    borderRadius: 4  }};Highcharts.setOptions(theme);var lineChart = Highcharts.chart(container, {  chart: { type: &quot;line&quot; }});var columnChart = Highcharts.chart(container, {  chart: { type: &quot;column&quot; }});</code></pre><br/><br/><h4 id="權重最小"><a href="#權重最小" class="headerlink" title="# 權重最小"></a># 權重最小</h4><br/><p>當然，要是圖表數量多了，總是會有變動的可能，但如果你還記得「越細節，權重越高」這個原則的話，就會知道「主題設定」的權重是最小的，因為它影響的範圍是所有設定中最大的。</p><pre><code class="javascript">var theme = {  chart: {    borderWidth: 1,    borderColor: &quot;#ddd&quot;,    borderRadius: 4  }};Highcharts.setOptions(theme);var myChart = Highcharts.chart(container, {  chart: {    // 主題設定是可以被覆蓋的    borderColor: &quot;blue&quot;,    borderRadius: 5  }});</code></pre><p>所以要是有與「主題設定」不同的設定，直接寫在圖表設定中就可以了，Highcharts 會自動幫你覆蓋。</p><br/><br/><h4 id="深層合併"><a href="#深層合併" class="headerlink" title="# 深層合併"></a># 深層合併</h4><br/><p>如果遇到某些物件類型的屬性，例如 <code>style</code>、<code>xAxis.label</code> …等等，你可能會覺得要把整個屬性重新覆蓋一次，但其實你一樣只要撰寫不同的地方即可，因為 Highcharts 會自動幫我們做到深層的物件合併。</p><pre><code class="javascript">var theme = {  title: {    style: {      fontFamily: &quot;微軟正黑體&quot;,      fontWeight: &quot;bold&quot;,      color: &quot;#292929&quot;    }  },};Highcharts.setOptions(theme);var myChart = Highcharts.chart(container, {  title: {    text: &quot;公司員工年齡分佈&quot;,    style: { color: &quot;red&quot; } // 還是有吃到字型和粗細  }});</code></pre><br/><br/><h4 id="順序與重複"><a href="#順序與重複" class="headerlink" title="# 順序與重複"></a># 順序與重複</h4><br/><p>雖然「主題設定」非常的方便，不過要特別注意它的執行順序以及重複執行的問題，像是下面的程式碼中，我們先建立圖表才進行主題設定，那圖表是吃不到主題設定的。</p><pre><code class="javascript">var theme = {  chart: {    borderWidth: 1,    borderColor: &quot;#ddd&quot;,    borderRadius: 4  }};// 沒有吃到主題設定var lineChart = Highcharts.chart(container, {  chart: { type: &quot;line&quot; }});Highcharts.setOptions(theme);// 執行全域設定後，才吃得到主題設定var columnChart = Highcharts.chart(container, {  chart: { type: &quot;column&quot; }});</code></pre><br/><p>另外，重複執行 <code>Highcharts.setOptions</code> 是允許的，Highcharts 會自動把每次執行的設定內容合併，但是一樣要注意執行的順序。</p><pre><code class="javascript">var theme = {  chart: {    borderWidth: 1,    borderColor: &quot;#ddd&quot;,    borderRadius: 4  }};// 第一次執行全域設定Highcharts.setOptions(theme);// 有邊框，顏色為 #dddvar lineChart = Highcharts.chart(container, {  chart: { type: &quot;line&quot; }});// 第二次執行全域設定Highcharts.setOptions({  chart: { borderColor: &quot;red&quot; }});// 一樣有邊框，但邊框顏色為 redvar columnChart = Highcharts.chart(container, {  chart: { type: &quot;column&quot; }});</code></pre><p><br/><br/></p><p>那今天的「主題設定」就介紹到這邊，雖然是比較間單的功能，但卻能幫我們省去很多重複的工作，跟先前介紹的「繪圖區設定」有異曲同工之妙，接著明天要繼續介紹的是「響應式設定」，讓我們的圖表也能適應 RWD 網站。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10246743" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/Vwaqvab&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 日期座標軸&amp;語言設定</title>
    <link href="https://maxleebk.com/2020/09/29/highcharts-15/"/>
    <id>https://maxleebk.com/2020/09/29/highcharts-15/</id>
    <published>2020-09-29T04:30:00.000Z</published>
    <updated>2021-09-20T21:55:45.001Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/GRZwKjW" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/GRZwKjW</a></strong></p></blockquote><p>今天要又要來填坑了，在座標軸設定時有說會特別介紹「日期座標軸」，因為它的設定不僅僅與「座標軸設定」有關，還必須連動「數據列設定」，並且搭配昨天介紹的「格式化屬性」，算是比較複雜的應用。</p><br/><p>另外今天還會提到「語言設定」，它可以讓我們定義一些因 <strong>地區習慣</strong> 不同而變化的預設字符，包含昨天的千份位符號以及今天會用到的月份、星期名稱…等等。</p><hr><h2 id="日期座標軸"><a href="#日期座標軸" class="headerlink" title="日期座標軸"></a>日期座標軸</h2><p>當圖表的資料是包含時間維度的，那就有使用「日期座標軸的」需求，用來標示個別數據點的測量／紀錄時間。</p><p>而在 <strong><a href="/2020/09/22/highcharts-9/#Axis-type">座標軸設定</a></strong> 介紹過了，只要將 <code>Axis.type</code> 設為 <code>datetime</code> 即可將座標軸設定為「日期座標軸」。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  title: { text: &quot;臺北市每日氣溫&quot; },  subtitle: { text: &quot;2020年9月第一週&quot; },  credits: { enabled: false },  xAxis: {    type: &quot;datetime&quot;  },  yAxis: {    title: { text: &quot;攝氏溫度&quot; },    labels: { format: &quot;{value}°C&quot;}  },  series: [{    name: &quot;平均溫度&quot;,    data: [30, 30, 31, 28, 29, 29, 28]  }]});</code></pre><p>但如果僅僅只是這樣設定，你會發現座標軸的刻度與 <strong>每日氣溫</strong> 這個圖表主題不太相符，因為「日期座標軸」預設是以 <code>1970/1/1</code> 作為數據點的起始值，並且間距為 <code>1毫秒</code>。那下面我們就以完成這張圖表為目標，一步步學習如何設定「日期座標軸」吧。</p><img src="axisNoDate.png" style="max-width: 650px; margin: 24px auto;" /><h4 id="調整座標刻度間距"><a href="#調整座標刻度間距" class="headerlink" title="# 調整座標刻度間距"></a># 調整座標刻度間距</h4><br/><p>首先，我們先將座標刻度的間距改為「一天」，這裡要運用的屬性是 <code>Axis.tickInterval</code>，之前在 <strong><a href="/2020/09/22/highcharts-9/#Axis-tickInterval-Axis-minorTickInterval">座標軸設定</a></strong> 裡一樣有介紹過。</p><pre><code class="javascript">xAxis: {  type: &quot;datetime&quot;,  tickInterval: 24 * 3600 * 1000 // 一天的毫秒數},</code></pre><p>設定完之後會發現座標刻度都消失了，只剩下一個 <code>1.Jan</code>，因為雖然刻度間距已經調整為一天了，但數據點之間的時間間隔還是被 Highcharts 認定為是 <code>1毫秒</code>。所以對圖表來說，這七個點都是同一天的數據，自然也就不需要顯示第二天、第三天的刻度了。</p><img src="tickInterval.png" style="max-width: 650px; margin: 24px auto;" /><br/><h4 id="調整數據點間距"><a href="#調整數據點間距" class="headerlink" title="# 調整數據點間距"></a># 調整數據點間距</h4><br/><p>為了解決上面的問題，要利用之前在 <strong><a href="/2020/09/24/highcharts-11/#series-pointInterval">數據點設定</a></strong> 中提過的 <code>series.pointInterval</code> 來將數據點的間距改為一天。</p><pre><code class="javascript">series: [{  name: &quot;平均溫度&quot;,  data: [30, 30, 31, 28, 29, 29, 28],  pointInterval: 24 * 3600 * 1000 // 一天的毫秒數}]</code></pre><p>這樣座標刻度與數據點就對上了，剛好一天一個點，不過目前的起始Ｘ軸座標還是 <code>1970/1/1</code>，所以接下來要將日期改成我們要的九月第一週。</p><img src="pointInterval.png" style="max-width: 650px; margin: 24px auto;" /><br/><h4 id="調整數據點起始X值"><a href="#調整數據點起始X值" class="headerlink" title="# 調整數據點起始Ｘ值"></a># 調整數據點起始Ｘ值</h4><br/><p>由於我們設定數據點資料的方式是「數值設定法」，所以數據點本身沒有Ｘ軸數值，使得 Highcharts 以 <code>1970/1/1 零毫秒</code> 作為我們第一個數據點的起始Ｘ軸數值，所以我們要用 <code>series.pointStart</code> 來將數據點的起始設定為 <code>8/31</code>，也就是九月第一週的星期一。</p><pre><code class="javascript">series: [{  name: &quot;平均溫度&quot;,  data: [30, 30, 31, 28, 29, 29, 28],  pointStart: new Date(&quot;2020/8/31&quot;).getTime(),  pointInterval: 24 * 3600 * 1000 }]</code></pre><p>在使用日期座標軸的圖表中，數據點Ｘ軸數值是以「時間戳數值」來表示的，所以我們只要傳入 <code>2020/8/31</code> 這一天的時間戳數值即可。</p><p>但如此設定後，卻發現數據點發生了偏移，而且看了一下第一個數據點的提示框，發現起始點竟然不是 <code>2020/8/31</code> 而是 <code>2020/8/30 16:00</code>，原來 Highcharts 是以格林威治的時間來計算的，但 <code>new Date()</code> 拿到的是台灣本地時間，所以才會早了八個小時。</p><br/><blockquote><p>台灣的時區是 <code>GMT+8</code>，比格林威治標準時間快八個小時。所以在台灣進入 <code>2020/8/31 00:00</code> 時，格林威治還在 <code>2020/8/30 16:00</code>。</p></blockquote><img src="pointStart.png" style="max-width: 650px; margin: 24px auto;" /><br/><h4 id="調整時區的時間差"><a href="#調整時區的時間差" class="headerlink" title="# 調整時區的時間差"></a># 調整時區的時間差</h4><br/><p>為了讓圖表的數據點時間點和刻度可以對得起來，就要處理因為時區所造成的時間差，這裡有兩種方法提供給大家。</p><p>你可以使用「時間設定」裡的 <code>time.timezoneOffset</code> 來告訴 Highcharts 你的時區偏移隔離威治多少，而這個數值可以透過 <code>getTimezoneOffset</code> 這個日期方法來取得。</p><pre><code class="javascript">let offset = new Date().getTimezoneOffset(); // -480var myChart = Highcharts.chart(container, {  time: { timezoneOffset: offset }});</code></pre><p>或是比較簡單的做法是以 <code>Date.UTC</code> 來取得時間戳數值，而非 <code>new Date()</code>，因為它可以直接取得國際標準時間的時間戳。</p><pre><code class="javascript">series: [{  name: &quot;平均溫度&quot;,  data: [30, 30, 31, 28, 29, 29, 28],  pointStart: Date.UTC(2020, 7, 31),  pointInterval: 24 * 3600 * 1000 }]</code></pre><p>如此一來，我們就有一個時間完全正確的圖表了。</p><img src="utc.png" style="max-width: 650px; margin: 24px auto;" /><br/><h4 id="指定時間的數據點"><a href="#指定時間的數據點" class="headerlink" title="# 指定時間的數據點"></a># 指定時間的數據點</h4><br/><p>雖然目前的成果基本滿足需求，但假如 <code>9/3 中午12:00</code> 有一個歷年高溫我們想要加到圖表中，那該怎麼辦？</p><p>由於我們已經利用 <code>pointStart</code> 設定了數據點間隔，如果從中穿插一個點，只會讓圖表多增加一天而已，所以在加入這個數據點時，我們要直接為它指定時間戳在Ｘ軸數值。</p><pre><code class="javascript">let specifyPoint = {  x: new Date(&quot;2020/9/3 12:00&quot;).getTime(),  y: 36,  color: &quot;red&quot;,  custom: &quot;中午12:00&quot;} var myChart = Highcharts.chart(container, {  series: [{    name: &quot;平均溫度&quot;,    data: [30, 30, 31, 28, specifyPoint, 29, 29, 28],    pointStart: new Date(&quot;2020/8/31&quot;).getTime(),    pointInterval: 24 * 3600 * 1000   }]});</code></pre><p>這樣就可以有指定時間的數據點了，另外，其實你也可以不用 <code>pointStart</code> 和 <code>pointInterval</code>，完全使用指定的Ｘ軸數值來製作日期座標軸圖表。</p><img src="specifyPoint.png" style="max-width: 650px; margin: 24px auto;" /><br/><h4 id="語言設定"><a href="#語言設定" class="headerlink" title="# 語言設定"></a># 語言設定</h4><br/><p>到這裡，我們的溫度圖表已經完全可以拿來提供給使用者觀看了，可是看著英文的月份和星期實在是有點不親切，為了改變這些 Highcharts 預設的字符，必須使用全域的「語言設定」。</p><pre><code class="javascript">Highcharts.setOptions({  lang: {    months: [&#39;一月&#39;, &#39;二月&#39;, .... &#39;十二月&#39;], // 中間省略    shortMonths: [&#39;1月&#39;, &#39;2月&#39;, .... &#39;12月&#39;], // 中間省略    weekdays: [&quot;星期一&quot;,&quot;星期二&quot;, .... &quot;星期日&quot;] // 中間省略  }})var myChart = Highcharts.chart(container, {  //...省略});</code></pre><p>程式碼中可以看到一個新的方法 <code>Highcharts.setOptions</code>，它是用來設定全域設定的，影響範圍是頁面中的全部圖表，所以只要設定一次即可。其中「語言設定」必須使用這個方式來定義，這裡我們將月份和星期改成中文的版本。</p><p>如此一來，刻度標籤和提示框就有親切的中文顯示囉～</p><img src="lang.png" style="max-width: 650px; margin: 24px auto;" /><blockquote><p>另外昨天提到的小數點與千分位符號也是在「語言設定」中調整的。</p></blockquote><pre><code class="javascript">lang: {  decimalPoint: &quot;.&quot;, // 小數點預設值  thousandsSep: &quot;\u0020&quot; // 千分位預設值，\u0020 為空白符號}</code></pre><br/><br/><h4 id="日期格式化"><a href="#日期格式化" class="headerlink" title="# 日期格式化"></a># 日期格式化</h4><br/><p>雖然已經有中文了，不過日期的字串格式似乎不太符合台灣人的習慣，這時候就可以運用昨天才學到的格式化屬性來調整了，而且 Highcharts 一樣有提供日期的特殊符號可以使用。</p><img src="dateSymbol.png" style="max-width: 500px; margin: 24px auto;" /><pre><code class="javascript">var myChart = Highcharts.chart(container, {  yAxis: {    title: { text: &quot;攝氏溫度&quot; },    labels: { format: &quot;{value}°C&quot;}  },  tooltip: {    headerFormat: &quot;{point.key:%Y/%m/%d %A}&lt;br/&gt;&quot;,    pointFormatter() {      let type =  this.custom ? &quot;最高溫度&quot; : &quot;平均溫度&quot;;      let time = this.custom ? `(${this.custom})` : &quot;&quot; ;      return `${type}: ${this.y}°C ${time}`    }  },});</code></pre><p>最後把上面的符號表規則應用在昨天學到的格式化屬性後，我們就有一個非常完美的客製化圖表了，同時也把「日期座標軸」的設定方法和應用搞清楚了。</p><img src="format.png" style="max-width: 650px; margin: 24px auto;" /><p><br/><br/></p><p>今天利用了一整個範例來學習「日期座標軸」，並且成功製作了一個包含時間維度的圖表，相信未來如果有類似需求，各位應該可以易如反掌得解決了。而明天要繼續跟大家介紹的是「主題設定」。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10246182" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/GRZwKjW&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 格式化屬性</title>
    <link href="https://maxleebk.com/2020/09/28/highcharts-14/"/>
    <id>https://maxleebk.com/2020/09/28/highcharts-14/</id>
    <published>2020-09-28T10:10:00.000Z</published>
    <updated>2021-09-20T21:55:44.997Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/mdPjEEZ" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/mdPjEEZ</a></strong><br>避免文章篇幅過長，沒辦法每個屬性都利用圖片示意，所以記得善用範例來測試不太了解的屬性。</p></blockquote><p>在 Highcharts 中，格式化屬性是一個很強大的功能，它可以讓我們把圖表做得更細緻完善，例如將座標軸的刻度標籤加上單位、千分位，或是把提示框的內容補充的更詳盡等等…</p><hr><h2 id="格式化屬性-基本介紹"><a href="#格式化屬性-基本介紹" class="headerlink" title="格式化屬性 - 基本介紹"></a>格式化屬性 - 基本介紹</h2><br/><p>雖然我們已經看過格式化屬性很多次了，但是卻一直避過不談，它到底是做什麼用的？其實它做的事情就是<strong>「把一系列相似的項目轉換為相同規格的文字」</strong>，可以用一個簡單的 JavaScript 程式碼來解釋這個過程：</p><pre><code class="javascript">let max =  { name: &quot;Max&quot;, age: &quot;27&quot; };let sam =  { name: &quot;Sam&quot;, age: &quot;32&quot; };let items = [max, sam];let formatter = function(){  return `${this.name} is ${this.age} years old`;} let result = items.map(item =&gt; formatter.apply(item)); // [&quot;Max is 27 years old&quot;, &quot;Sam is 32 years old&quot;]</code></pre><p>Highcharts 就是這樣把一系列的物件輸出成我們想要的文字格式，最後呈現在標籤上或內容裡。而這<strong>「一系列物件」</strong>在不同的區塊屬性中都不盡相同。</p><p>例如在「圖例設定」的格式化屬性中你可以拿到一組組的數據列物件，但在「座標軸設定」中你拿到的又會是一組組的刻度標籤物件。</p><br/><p><strong>而格式化屬性主要分佈在以下四個區塊設定中：</strong></p><ul><li><strong>圖例設定：</strong> 調整圖例標籤</li><li><strong>提示框設定：</strong> 調整提示框內容</li><li><strong>座標軸設定：</strong> 調整刻度標籤</li><li><strong>數據列設定：</strong> 調整數據標籤</li></ul><pre><code class="javascript">var myChart = Highcharts.chart(container, {  legend: {    labelFormat: &quot;&quot;,    labelFormatter: function() {}  },  tooltip: {    headerFormat: &quot;&quot;,    footerFormat: &quot;&quot;,    pointFormat: &quot;&quot;,    pointFormatter: function() {},    formatter:  function() {}  },  xAxis: { // Y軸亦同    labels: {      format: &quot;&quot;,      formatter: function() {}    }  },  series: [{ // 繪圖區和數據點亦同    dataLabels: {      format: &quot;&quot;,      formatter: function() {}    }  }]});</code></pre><p>看到這堆屬性大家可能又頭昏了，不過「格式化屬性」不像昨天的顏色屬性那麼複雜，就只是屬性看起來多了點，如果仔細一看就會發現，其實格式化屬性就分為兩種，一個是用字串設定的 <code>format</code>，以及利用函式設定的 <code>formatter</code>。</p><p>所以我們只要先把這兩種設定方式搞清楚後，再看看每個區塊能拿到什麼樣的物件，就可以知道如何利用格式化屬性啦。</p><hr><h2 id="格式化屬性-Format"><a href="#格式化屬性-Format" class="headerlink" title="格式化屬性 - Format"></a>格式化屬性 - Format</h2><br/><p>先來介紹以字串設定的 <code>format</code>，假如希望顯示的文字格式不是太複雜，而且不需要特別的判斷或計算，那基本上 <code>format</code> 就已經可以滿足我們的需求了，設定技巧如下：</p><br/><h4 id="格式語法"><a href="#格式語法" class="headerlink" title="# 格式語法"></a># 格式語法</h4><p>其實就和我們上面的 JavaScript 案例中使用的「ES6 - 模版字符串」有點類似，但只需要「大括號」即可。</p><pre><code class="javascript">`這是一個變數: ${variables}` // ES6 - 模版字符串&quot;這是一個變數: {variables}&quot; // Highcharts - format設定字串</code></pre><br/><br/><h4 id="HTML標籤"><a href="#HTML標籤" class="headerlink" title="# HTML標籤"></a># HTML標籤</h4><p>另外，格式化字串中可以使用部分 HTML 行內元素，像是 <code>&lt;b&gt;</code>、<code>&lt;strong&gt;</code>、<code>&lt;i&gt;</code>、<code>&lt;em&gt;</code>、<code>&lt;br/&gt;</code>、<code>&lt;span&gt;</code>，並且也可以加上行內樣式來調整外觀，但因為 Highcharts 是以 SVG 渲染的，所以只接受能夠與 SVG 相容的 CSS 屬性。</p><pre><code class="javascript">&quot;&lt;b&gt;這是一個變數&lt;/b&gt;:&lt;br/&gt; &lt;span style=&#39;color: red&#39;&gt;{variables}&lt;span&gt;&quot;</code></pre><br/><br/><h4 id="數字處理"><a href="#數字處理" class="headerlink" title="# 數字處理"></a># 數字處理</h4><p>最後，Highcharts 還提供了一些符號來幫助我們處理數字「千分位」與「小數點」。當中的「冒號」要接在你的變數名稱後，而「逗號」表示使用千分位符號，而後面的 <code>.0f</code> 表示要顯示小數點後第幾位。</p><pre><code class="javascript">// 假如 variables 為 12500.333&quot;{variables:,.2f}&quot; // 12 500.333&quot;{variables:.4f}&quot; // 12500.3330&quot;{variables:,}&quot; // 不可單獨使用！！！</code></pre><blockquote><p>你可能有發現千分位是用空白格開的，明天會教大家如何改變預設的千分位符號。</p></blockquote><hr><h2 id="格式化屬性-Formatter"><a href="#格式化屬性-Formatter" class="headerlink" title="格式化屬性 - Formatter"></a>格式化屬性 - Formatter</h2><br/><p>再來是用函式設定的 <code>formatter</code> 屬性，這個函式必須返回一組字串，且不需要使用 Highcharts 的特殊語法，直接使用 JavaScrip 的字串即可，而使用函式的好處就是可以對資料先進行計算或判斷處理。</p><br/><h4 id="函式裡的This"><a href="#函式裡的This" class="headerlink" title="# 函式裡的This"></a># 函式裡的This</h4><p>其實 <code>formatter</code> 的原理和開頭的 JavaScript 程式碼一樣，Highcharts 會把一組一組的物件放進 <code>this</code> 裡。</p><p>以數據標籤來說，假如數據點有五個，那格式化函式就會執行五次，而每一次都可以從 <code>this</code> 裡拿到個別的<strong>「數據點物件」</strong>，如此一來，就可以獲取需多資訊來進行判斷或計算。</p><br/><blockquote><p><strong>注意：</strong> 因為需要使用 <code>this</code> 才能取得物件資料，所以不能使用箭頭函式，箭頭函式沒有 <code>this</code>。</p></blockquote><pre><code class="javascript">series: [{  data: [5, 6, 7, 8, 9],  dataLabels: {    enabled: true,    formatter: function() {      console.log(this); // 會有五次console，每一次代表一個數據點      return this.y // 數據點物件中 y 屬性即數據點數值    }  }}]</code></pre><br/><br/><h4 id="數字處理-1"><a href="#數字處理-1" class="headerlink" title="# 數字處理"></a># 數字處理</h4><p>在 <code>formatter</code> 函式中你可以呼叫 <code>Highcharts.numberFormat</code> 來處理「千分位」與「小數點」，不需要自己寫冗長的程式碼。</p><pre><code class="javascript">formatter: function() {  // 假如 this.y 為 12500.333  return Highcharts.numberFormat(this.y, 4, &quot;.&quot;, &quot;,&quot;) // 輸出 12,500.3330  return Highcharts.numberFormat(this.y, 2, &quot;,&quot;, &quot;&quot;)  // 輸出 12500.33  return Highcharts.numberFormat(this.y, 0)  // 輸出 12 500}</code></pre><br/><br/><h4 id="series-custom-series-data-custom"><a href="#series-custom-series-data-custom" class="headerlink" title="# series.custom / series.data.custom"></a># series.custom / series.data.custom</h4><p><code>型別: Any</code> <code>預設: undefined</code></p><p>假如你很肯定某些資訊在 <code>this</code> 是沒有的，那可以在這兩個屬性中放入自定義的資料，這樣就可以在 <code>formatter</code> 中拿到這些資料了</p><pre><code class="javascript">series: [{  custom: { total: 35 },  data: [5, 6, 7, 8, 9],  dataLabels: {    enabled: true,    formatter: function() {      let total = this.series.options.custom.total      return Highcharts.numberFormat(this.y / total * 100, 1) + &quot;%&quot;;    }  }}]</code></pre><hr><h2 id="格式化屬性-區塊屬性"><a href="#格式化屬性-區塊屬性" class="headerlink" title="格式化屬性 - 區塊屬性"></a>格式化屬性 - 區塊屬性</h2><br/><p>了解兩種屬性的設定方式後，就可以來看看各個區塊裡的格式化屬性可以拿到什麼「物件」了。</p><p>但這些「物件」裡的屬性又是一個海量的存在，應該都夠我參加兩次鐵人賽了，所以就只大概簡介一下，如果想要深入了解，最好辦法還是直接使用看看，然後用 <code>formatter</code> 直接 <code>console.log(this)</code> 最快。</p><br/><p><img src="config.png" alt=""></p><br/><blockquote><h5 id="※-補充說明"><a href="#※-補充說明" class="headerlink" title="※ 補充說明"></a>※ 補充說明</h5><p>這裡的「物件」指的是 Highcharts 將該區塊的相關資料包裝好後提供給格式化屬性的，並且只要是同一組的格式化屬性，拿到的物件都是相同的，因此 <code>this.y</code> 和 <code>{y}</code> 代表的都是一樣的值。</p><p><strong>注意：</strong> 有些屬性 <code>format</code> 不支援，如果確定要使用的話就改用 <code>formatter</code> 吧！</p></blockquote><br/><br/><h4 id="圖例文字標籤"><a href="#圖例文字標籤" class="headerlink" title="# 圖例文字標籤"></a># 圖例文字標籤</h4><p>圖例標籤的格式化屬性拿到的物件一般是「數據列物件」，但如果是圓餅圖這種以數據點為圖例單位的圖表，則是「數據點物件」，兩種物件長得不太一樣，不過常用的有 <code>name</code>、<code>color</code>、<code>index</code> 這幾個。</p><ul><li><strong>官方文件： <a href="https://api.highcharts.com/class-reference/Highcharts.Series" target="_blank" rel="noopener">數據列物件</a> / <a href="https://api.highcharts.com/class-reference/Highcharts.Point" target="_blank" rel="noopener">數據點物件</a></strong></li></ul><pre><code class="javascript">// 以下為預設值legend: {  labelFormat: &quot;{name}&quot;,  labelFormatter: undefined}</code></pre><p>另外「數據點物件」還多了 <code>total</code>、<code>percentage</code> 這兩個直接幫你計算好的值，所以你就可以直接在圖例上顯示百分比。</p><img src="legend.png" style="max-width: 600px; margin: 20px auto;" /><h4 id="提示框內容"><a href="#提示框內容" class="headerlink" title="# 提示框內容"></a># 提示框內容</h4><p>提示框內容的格式化屬性是最多也最特別的，可以看看下方的說明圖可能較好理解，另外 <code>tooltip.formatter</code> 所拿到的物件屬性會受到 <code>tooltip.shared</code> 的影響，建議可以印出來看看差別。</p><blockquote><p><strong>注意：</strong> <code>pointFormat</code> 在屬性前方必須加上 <code>point.</code> 例如 <code>{point.color}</code>，但並不清楚為何這個屬性多了這個規定。</p></blockquote><p>這邊也提供我的應用給大家參考：<strong><a href="https://codepen.io/max-lee/pen/bGpmmjj" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/bGpmmjj</a></strong></p><ul><li><strong>官方文件： <a href="https://api.highcharts.com/class-reference/Highcharts.Point" target="_blank" rel="noopener">數據點物件</a> / <a href="https://api.highcharts.com/class-reference/Highcharts.TooltipFormatterContextObject" target="_blank" rel="noopener">提示框內容物件</a></strong></li></ul><pre><code class="javascript">// 以下為預設值tooltip: {  headerFormat: &#39;&lt;span style=&quot;font-size: 10px&quot;&gt;{point.key}&lt;/span&gt;&lt;br/&gt;&#39;,  footerFormat: &#39;&#39;,  pointFormat: &#39;&lt;span style=&quot;color:{point.color}&quot;&gt;●&lt;/span&gt; {series.name}: &lt;b&gt;{point.y}&lt;/b&gt;&lt;br/&gt;.&#39;,  pointFormatter: undefined,  formatter:  undefined}</code></pre><img src="tooltip.png" style="max-width: 800px; margin: 20px auto;" /><br/><h4 id="座標軸刻度標籤"><a href="#座標軸刻度標籤" class="headerlink" title="# 座標軸刻度標籤"></a># 座標軸刻度標籤</h4><p>座標軸刻度標籤的格式化屬性拿到的物件是「刻度標籤物件」，裡面會有座標軸的相關設定屬性、圖表物件，以及該刻度所代表的Ｘ／Ｙ值 <code>value</code>，也有 <code>isFirst</code>、<code>isLast</code>，幫助你判斷該刻度是否為第一個或最後一個。</p><ul><li><strong>官方文件： <a href="https://api.highcharts.com/class-reference/Highcharts.AxisLabelsFormatterContextObject" target="_blank" rel="noopener">刻度標籤物件</a></strong></li></ul><pre><code class="javascript">// 以下為預設值xAxis: { // Y軸亦同  labels: {    format: &quot;{value}&quot;,    formatter: undefined  }}</code></pre><br/><br/><h4 id="數據標籤"><a href="#數據標籤" class="headerlink" title="# 數據標籤"></a># 數據標籤</h4><p>數據標籤的格式化屬性拿到的物件是「數據標籤物件」，基本上內含屬性就和圖例標籤是差不多的，不過同時包含了「數據列物件」、「數據點物件」，所以可用的數據又更多了。</p><p>另外繪圖區跟數據點也都可以設定格式化屬性，權重大小就和之前介紹的一樣。</p><ul><li><strong>官方文件： <a href="https://api.highcharts.com/class-reference/Highcharts.PointLabelObject" target="_blank" rel="noopener">數據標籤物件</a></strong></li></ul><pre><code class="javascript">// 以下為預設值series: [{ // 繪圖區和數據點亦同  dataLabels: {    format: &quot;{point.value}&quot;,    formatter: undefined  }}]</code></pre><p><br/><br/></p><p>今天又解決一個難纏的屬性，不過難歸難，格式化屬性在 Highcharts 中的重要性還是非常高的，大大提升了圖表的自定義程度，尤其提示框內容運用得宜的話，可以很大程度上的補充圖表資訊。</p><p>但如果真覺得很複雜的話，我推薦一律使用 <code>formatter</code>，寫起來就跟一般在寫 JavaScript 沒兩樣，想知道有哪些屬性也可以直接 <code>console</code>。</p><p>那接著明天，要帶大家完整設定出一個「日期座標軸」的圖表，當中涉及了座標軸設定、數據列設定以及今天的格式化屬性。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10245718" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/mdPjEEZ&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 顏色屬性</title>
    <link href="https://maxleebk.com/2020/09/27/highcharts-13/"/>
    <id>https://maxleebk.com/2020/09/27/highcharts-13/</id>
    <published>2020-09-27T03:00:00.000Z</published>
    <updated>2021-09-20T21:55:44.997Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/poyZgWx" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/poyZgWx</a></strong><br>避免文章篇幅過長，沒辦法每個屬性都利用圖片示意，所以記得善用範例來測試不太了解的屬性。</p></blockquote><p>我猜可能有些人在前面幾天一直很在意到底要怎麼更換「數據列／點」的顏色吧，還是其實已經有人等不及，自己偷偷跑去翻出調整顏色的屬性了。</p><p>Highcharts 當然是可以調整顏色的，但不是我不想跟大家介紹，而是能夠設定顏色的方法很多，而且又有權重的問題，所以才會想接在「繪圖區設定」後面介紹顏色的部分。</p><hr><h2 id="數據列顏色"><a href="#數據列顏色" class="headerlink" title="數據列顏色"></a>數據列顏色</h2><br/><p>昨天有講到繪圖區、數據列、數據點的權重大小，而調整顏色的屬性除了在這些區塊裡都可以調整外，顏色本身也有獨立的屬性可以設定。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  colors: [&quot;red&quot;, &quot;orange&quot;],    // 所有數據列依序採用陣列中顏色   plotOptions: {    series:{       color: &quot;green&quot;,           // 所有數據列都採用這個顏色      colorByPoint: true,       // 所有數據列是否都用colors設定數據點顏色      colors: [&quot;cyan&quot;, &quot;navy&quot;], // 所有數據列的數據點依序採用陣列中顏色    },    line: {       color: &quot;blue&quot;,            // 指定類型數據列都採用這個顏色      colorByPoint: true,       // 指定類型數據列是否都用colors設定數據點顏色      colors: [&quot;lime&quot;, &quot;plum&quot;], // 指定類型數據列的數據點依序採用陣列中顏色     }  },  series: [{    color: &quot;purple&quot;,            // 這組數據列採用這個顏色    colorByPoint: true,         // 是否要用colors設定數據點顏色    colors: [&quot;pink&quot;, &quot;gray&quot;],   // 這組數據列裡的數據點依序採用陣列中顏色    data: [{ color: &quot;black&quot; }]  // 這個數據點採用這個顏色  }]});</code></pre><p>是不是看得頭都暈了？這樣應該知道為何我要等的現在才講顏色了吧？那下面就從權重最低到最高一個個詳細介紹。</p><br/><h4 id="options-colors"><a href="#options-colors" class="headerlink" title="# options.colors"></a># options.colors</h4><p><code>型別: Array[String]</code> <code>預設: 請見下方</code></p><p>這個顏色屬性直接隸屬於 <code>options</code> 物件底下，而它的值是一組陣列，陣列裡必須是合法的顏色字串，然後 <strong>「所有數據列」</strong> 便會依據它自己的順序從 <code>colors</code> 裡拉出顏色來設定，<strong>假如顏色用完了就會在回到第一個繼續循環</strong>。</p><p>這也是為什麼我們前面的範例總是藍色的，因為它被設定的是預設 <code>colors</code> 裡的第一個顏色 <code>#7cb5ec</code>。</p><pre><code class="javascript">default = [&quot;#7cb5ec&quot;, &quot;#434348&quot;, &quot;#90ed7d&quot;, &quot;#f7a35c&quot;, &quot;#8085e9&quot;, &quot;#f15c80&quot;, &quot;#e4d354&quot;, &quot;#2b908f&quot;, &quot;#f45b5b&quot;, &quot;#91e8e1&quot;]</code></pre><img src="color.png" style="max-width: 600px; margin: 20px auto;" /><br/><br/><h4 id="plotOptions-series-color"><a href="#plotOptions-series-color" class="headerlink" title="# plotOptions.series.color"></a># plotOptions.series.color</h4><p><code>型別: String</code> <code>預設: undefined</code></p><p>這個顏色屬性就非常很單純了，就是把 <strong>「所有數據列」</strong> 改成指定的顏色。</p><br/><br/><h4 id="plotOptions-type-color"><a href="#plotOptions-type-color" class="headerlink" title="# plotOptions.[type].color"></a># plotOptions.[type].color</h4><p><code>型別: String</code> <code>預設: undefined</code></p><p>由於昨天解釋過繪圖區的權重關係，所以這個顏色屬性應該也不難懂，就是把 <strong>「所有指定類型的數據列」</strong> 改成指定的顏色，須要特別注意的是，假如你設定的圖表種類未涵蓋所有圖表的話，那其他圖表會「從頭」開始設定 <code>options.colors</code> 中的顏色，並且跳過已經有指定顏色的圖表。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  colors: [&quot;green&quot;, &quot;blue&quot;, &quot;purple&quot;], // 所有數據列依序採用陣列中顏色   plotOptions: {    column: { color: &quot;red&quot; }  },  series: [    { type: &quot;column&quot;, data: [2, 2, 2] }, // 紅色    { type: &quot;line&quot;,   data: [6, 6, 6] }, // 綠色    { type: &quot;column&quot;, data: [4, 4, 4] }, // 紅色    { type: &quot;line&quot;,   data: [2, 2, 2] }  // 藍色  ]});</code></pre><br/><br/><h4 id="series-color"><a href="#series-color" class="headerlink" title="# series.color"></a># series.color</h4><p><code>型別: String</code> <code>預設: undefined</code></p><p>這個顏色屬性一樣很簡單，就是把 <strong>「這個數據列」</strong> 改成指定的顏色。而且和上一個屬性一樣，剩下的數據列會「從頭」開始設定 <code>options.colors</code> 中的顏色，並且跳過已經有指定顏色的圖表。</p><br/><br/><h4 id="plotOptions-series-colorByPoint"><a href="#plotOptions-series-colorByPoint" class="headerlink" title="# plotOptions.series.colorByPoint"></a># plotOptions.series.colorByPoint</h4><p><code>型別: Boolean</code> <code>預設: false</code></p><p>這個屬性可以決定是否要用 <code>colors</code> 來依序設定 <strong>「所有數據列的數據點顏色」</strong>，這裡指的 <code>colors</code> 不一定是 <code>options.colors</code>，而是權重最高的 <code>colors</code>。</p><br/><br/><h4 id="plotOptions-series-colors"><a href="#plotOptions-series-colors" class="headerlink" title="# plotOptions.series.colors"></a># plotOptions.series.colors</h4><p><code>型別: Array[String]</code> <code>預設: undefined</code></p><p>假如你的數據列沒有開啟 <code>colorByPoint</code>，那這個顏色屬性基本上就沒以任何作用，但如果開啟了，這個屬性就會覆蓋 <code>options.colors</code>，並用你提供的顏色陣列來依序設定<strong>「所有數據列的數據點顏色」</strong>。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  colors: [&quot;green&quot;, &quot;blue&quot;, &quot;purple&quot;],  plotOptions: {    series: {      colorByPoint: true,      colors: [&quot;pink&quot;, &quot;red&quot;, &quot;orange&quot;]    }  },  series: [{     // 粉紅色, 紅色, 橘色, 粉紅色, 紅色    data: [5, 3, 7, 4, 10]   }] });</code></pre><br/><br/><h4 id="plotOptions-type-colorByPoint-plotOptions-type-colors"><a href="#plotOptions-type-colorByPoint-plotOptions-type-colors" class="headerlink" title="# plotOptions.[type].colorByPoint / plotOptions.[type].colors"></a># plotOptions.[type].colorByPoint / plotOptions.[type].colors</h4><p>這組應該就不用多作介紹了吧，作用和前面一樣，只不過對象換成 <strong>「所有指定類型數據列的數據點顏色」</strong>。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  colors: [&quot;green&quot;, &quot;blue&quot;, &quot;purple&quot;],  plotOptions: {    series: {      colors: [&quot;pink&quot;, &quot;red&quot;, &quot;orange&quot;]    },    line: {      colorByPoint: true,    }  },  series: [    // 粉紅色, 紅色, 橘色, 粉紅色, 紅色    { type: &quot;line&quot;, data: [5, 5, 5, 5, 5] },    // 所有數據列都是綠色的    { type: &quot;column&quot;, data: [3, 3, 3, 3, 3] },    // 粉紅色, 紅色, 橘色, 粉紅色, 紅色    { type: &quot;line&quot;, data: [2, 2, 2, 2, 2] }  ] });</code></pre><img src="color1.png" style="max-width: 600px; margin: 20px auto;" /><br/><br/><h4 id="series-colorByPoint-series-colors"><a href="#series-colorByPoint-series-colors" class="headerlink" title="# series.colorByPoint / series.colors"></a># series.colorByPoint / series.colors</h4><p>數據列中也是有同一組的設定，也是必須要 <code>colorByPoint</code> 開啟才會作用，不過作用對象就換成了 <strong>「單一數據列的數據點顏色」</strong>。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  chart: { type: &quot;column&quot; },  colors: [&quot;green&quot;, &quot;blue&quot;, &quot;purple&quot;],  plotOptions: {    series: {      colorByPoint: true,      colors: [&quot;pink&quot;, &quot;red&quot;, &quot;orange&quot;]    },  },  series: [    // 粉紅色, 紅色, 橘色, 粉紅色, 紅色    { data: [5, 3, 7, 4, 10] },    // 所有數據列都是綠色的    { colorByPoint: false, data: [5, 3, 7, 4, 10] },    // 黑色, 灰色, 褐色, 黑色, 灰色    { colors: [&quot;black&quot;, &quot;gray&quot;, &quot;brown&quot;], data: [5, 3, 7, 4, 10] }  ] });</code></pre><img src="color2.png" style="max-width: 600px; margin: 20px auto;" /><br/><br/><h4 id="series-data-color"><a href="#series-data-color" class="headerlink" title="# series.data.color"></a># series.data.color</h4><p><code>型別: String</code> <code>預設: undefined</code></p><p>這個顏色屬性是權重最高的，它可以決定 <strong>「單一數據點顏色」</strong>，不過跟數據列不同的是，它會直接覆蓋 <code>colors</code> 設定的顏色，而 <strong>不會被跳過</strong>。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  chart: { type: &quot;column&quot; },  colors: [&quot;green&quot;, &quot;blue&quot;, &quot;purple&quot;],  plotOptions: {    series: { colorByPoint: true }  },  series: [{     // 綠色, 紅色, 紫色, 綠色, 藍色    data: [5, { y: 3, color: &quot;red&quot; }, 7, 4, 10]  }] });</code></pre><img src="color3.png" style="max-width: 600px; margin: 20px auto;" /><br/><blockquote><p>補充： 圓餅圖這類以「數據點」為單位的圖表類型，<code>colorByPoint</code> 是強制開啟無法調整的。</p></blockquote><p><br/><br/></p><p>今天完全在物理上體會了什麼叫「給你一點顏色瞧瞧」，單單一個顏色 Highcharts 就可以搞得那麼複雜。不過也因為這樣，在圖表的設計上就可以有很大的發揮空間，例如依據數據點的數值大小來調整顏色深淺。</p><p>而明天終於要來填「格式化屬性」的坑了。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10244723" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/poyZgWx&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 繪圖區設定</title>
    <link href="https://maxleebk.com/2020/09/26/highcharts-12/"/>
    <id>https://maxleebk.com/2020/09/26/highcharts-12/</id>
    <published>2020-09-26T03:10:00.000Z</published>
    <updated>2021-09-20T21:55:44.993Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/ExKRLGP" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/ExKRLGP</a></strong><br>避免文章篇幅過長，沒辦法每個屬性都利用圖片示意，所以記得善用範例來測試不太了解的屬性。</p></blockquote><p>如果前面幾個圖表元素的設定介紹你都有跟到的話，你可以想想看繪圖區設定還能調整或修改什麼？</p><p>繪圖區裡的數據列和數據點都有專屬的區塊設定，隔線、標記線(帶)由座標軸控制，就連繪圖區自己本身的背景、外框都是在「圖表整體設定」裡做調整，那繪圖區設定到底還能設定什麼？</p><p><strong>其實繪圖區本身沒有任何屬性可以設定，但它卻可以幫我們把數據列的重複設定抽出並統一管理。</strong></p><hr><h2 id="繪圖區設定-使用方法"><a href="#繪圖區設定-使用方法" class="headerlink" title="繪圖區設定 - 使用方法"></a>繪圖區設定 - 使用方法</h2><br/><p>繪圖區的設定就像是我們把重複的值抽出來設為變數一樣，它可以把重複的數據列設定給拉出來，統一放在它自己這邊，讓所有數據列都能吃到個設定。</p><p>由此可知，繪圖區的所有屬性都跟「數據列」一模一樣，除了 <code>type</code>、<code>name</code>、<code>data</code>、<code>index</code>、<code>legendIndex</code>…這些「不該共用」數據列的屬性。你可以自己比較看看折線圖的 <strong><a href="https://api.highcharts.com/highcharts/series.line" target="_blank" rel="noopener">數據列設定</a></strong> 和 <strong><a href="https://api.highcharts.com/highcharts/plotOptions.line" target="_blank" rel="noopener">繪圖區設定</a></strong> 有哪些不同。</p><br/><br/><p>不過你可能會好奇，如果是 <code>marker</code>、<code>size</code> 這類專屬於某個圖表類型的屬性怎麼辦？其實繪圖區設定的撰寫方式是這樣的…</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  plotOptions: {    series:{      // 在這張圖表裡的所有數據列都會套用    },    line: {      // 在這張圖表裡type為line的數據列會套用    },    column: {      // 在這張圖表裡type為column的數據列會套用    }  },});</code></pre><p>透過這樣的設定結構，你可以把通用的屬性放在 <code>series</code> 子物件底下，而折線圖專屬的設定放在 <code>line</code> 底下，這樣就可以區分通用與專門屬性了。</p><blockquote><p>但其實寫在一起也沒關係，就算設定了一個該圖表沒有的屬性，也不會發生錯誤或造成影響。</p></blockquote><br/><br/><h4 id="用一個簡單的案例來感受繪圖區設定的方便："><a href="#用一個簡單的案例來感受繪圖區設定的方便：" class="headerlink" title="用一個簡單的案例來感受繪圖區設定的方便："></a>用一個簡單的案例來感受繪圖區設定的方便：</h4><p>假設我們今天有一個「兩組折線圖／一組柱狀圖」的複合圖表，當中的三組數據列都要顯示「數據標籤」，然後兩組折線圖都要將線條改為虛線。沒用繪圖區設定的話要這樣寫…</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  // 省略其他區塊設定...  series: [    {      type: &quot;column&quot;,      name: &quot;柱狀圖&quot;,      data: [10,20,30,40,50],      dataLabels: { enabled: true }    },    {      name: &quot;折線圖一&quot;,      data: [35,35,35,35,35],      dashStyle: &quot;Dash&quot;,      dataLabels: { enabled: true }    },    {      name: &quot;折線圖二&quot;,      data: [55,55,55,55,55],      dashStyle: &quot;Dash&quot;,      dataLabels: { enabled: true }    }  ]});</code></pre><p>但如果利用繪圖區設定改寫一下，我們就可以避免大量重複的程式碼，而且如果未來要調整，就只要統一修改繪圖區設定一個地方就好，大大提升了程式碼的管理品質。</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  // 省略其他區塊設定...  plotOptions: {    series: {      dataLabels: { enabled: true }    },    line: {      dashStyle: &quot;Dash&quot;,    }  },  series: [    {      name: &quot;折線圖一&quot;,      data: [1,3,5,7,9]    },    {      name: &quot;折線圖二&quot;,      data: [2,4,6,8,10]    },    {      type: &quot;column&quot;,      name: &quot;柱狀圖&quot;,      data: [10,20,30,40,50]    }  ]});</code></pre><br/><blockquote><p>其實就算不是複合圖表，甚至只有單組數據列，我都習慣把數據列設定挪到繪圖區設定裡，這樣可以讓數據列專注在設定「數據點資料」。</p></blockquote><hr><h2 id="繪圖區設定-權重高低"><a href="#繪圖區設定-權重高低" class="headerlink" title="繪圖區設定 - 權重高低"></a>繪圖區設定 - 權重高低</h2><br/><p>既然「數據列設定」和「繪圖區設定」都能調整數據列，那如果不小心兩邊對同個屬性設定了不同的值會發生什麼事呢？</p><p>「越細節，權重越高」，在 Highcharts 中保持著一個觀念就不會容易被搞糊塗，以這個原則來看的話我們可以得到下圖的結果，也就是說如果「數據列設定」和「繪圖區設定」發生衝突，那最後會以數據列設定為優先。</p><p><img src="weights.png" alt=""></p><br/><br/><p>因此，只要把權重運用得宜的話，就可以這樣做：<strong><a href="https://codepen.io/max-lee/pen/RwaJyjg" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/RwaJyjg</a></strong></p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  // 省略其他區塊設定...  plotOptions: {    series: {       marker: {          enabled: true,         symbol: &quot;diamond&quot;,         radius: 6      }    },    line: {      marker: { symbol: &quot;triangle&quot; }    }  },  series: [    {      name: &quot;折線圖一&quot;,      marker: { enabled: false },      data: [30,30,30,30,{        y: 30,        marker: { enabled: true, symbol: &quot;triangle-down&quot; },      }]    },    {      name: &quot;折線圖二&quot;,      data: [60,60,60,60,60]    },    {      type: &quot;area&quot;,      name: &quot;面積圖&quot;,      fillColor: &quot;rgba(144, 237, 125, 0.2)&quot;,      data: [10,10,10,10,10]    }  ]});</code></pre><img src="weight-case.png" style="max-width: 700px; margin: 24px auto;" /><p><br/><br/></p><p>那繪圖區設定的介紹就到這邊，是不是覺得這樣統一的集中數據列設定清爽多了呢？不僅避免重複的程式碼還增加了易讀性，所以強烈建議大家試著多利用繪圖區設定來管理數據列！</p><p>接著明天要介紹的是看似簡單卻被我刻意跳過的「顏色設定」。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10244400" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/ExKRLGP&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
  <entry>
    <title>資視就是力量 - Highcharts / 數據點設定</title>
    <link href="https://maxleebk.com/2020/09/25/highcharts-11/"/>
    <id>https://maxleebk.com/2020/09/25/highcharts-11/</id>
    <published>2020-09-25T01:50:00.000Z</published>
    <updated>2021-09-20T21:55:44.993Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本章節範例：<strong><a href="https://codepen.io/max-lee/pen/rNevgYm" target="_blank" rel="noopener">https://codepen.io/max-lee/pen/rNevgYm</a></strong><br>避免文章篇幅過長，沒辦法每個屬性都利用圖片示意，所以記得善用範例來測試不太了解的屬性。</p></blockquote><p>昨天我們才介紹完數據列設定，而數據列其實就是一個個數據點所組成的一系列資料。講簡單一點，數據點就是折線圖裡的一個個點，圓餅圖裡的一個個扇形，而 Highcharts 的設定就是細到這樣的顆粒度，讓你每個點都能微調。</p><img src="point.png" style="max-width: 800px; margin: 16px auto 0;" /><hr><h2 id="數據點設定-基本介紹"><a href="#數據點設定-基本介紹" class="headerlink" title="數據點設定 - 基本介紹"></a>數據點設定 - 基本介紹</h2><br/><p>數據點其實就是透過數據列的 <code>data</code> 屬性設定的，也就是說數據列與數據點是相依相存的，而且就算只有一個數據點依然能稱為一個數據列。</p><p>而既然數據列設定的屬性會受到圖表類型影響，理所當然數據點就也會，甚至連設定方式都會有所改變。而且每一種圖表類型的數據點方式還不只一種，所以常常讓人搞得霧煞煞，不過今天就讓我幫大家統整歸納一下吧！</p><pre><code class="javascript">var myChart = Highcharts.chart(container, {  series: [{    data: [] // 數據點設定  }]});</code></pre><p><code>series.data</code> 能夠接受的型別是陣列，其中陣列裡每個項目所代表的就是一個一個的數據點（point），每個數據點又能以數字、陣列、或物件這三種型別來表示，至於要用哪一種取決於<strong>每個數據點之間的差異程度</strong>。</p><hr><h2 id="數據點設定-數值設定法"><a href="#數據點設定-數值設定法" class="headerlink" title="數據點設定 - 數值設定法"></a>數據點設定 - 數值設定法</h2><br/><pre><code class="javascript">series: [{  data: [0, 5, 3, 5] // 數據點設定-數字型別}]</code></pre><p>若以數字設定數據點，則這個數字會被 Highcharts 解析為數據點的Ｙ軸數值，Ｘ軸數值則會根據你的 <code>xAxis.type</code> 自動計算，如下。</p><ul><li>線性座標軸：從 <code>0</code> 開始，每個數據點依序增加 <code>1</code></li><li>類別座標軸：從 <code>xAxis.categories[0]</code> 開始，每個數據點依序拉出項目</li><li>日期座標軸：從 <code>1970/1/1 00:00</code> 開始，每個數據點依序增加一毫秒</li></ul><br/><p><strong>而當你用數值設定法來設定數據點，就可以下方兩個數據列屬性來調整上述規則。</strong></p><h4 id="series-pointStart"><a href="#series-pointStart" class="headerlink" title="# series.pointStart"></a># series.pointStart</h4><p><code>型別: Number</code> <code>預設: 0</code> </p><p>這個屬性設定的是你數據列中第一個數據點的Ｘ軸起始數值。</p><br/><br/><h4 id="series-pointInterval"><a href="#series-pointInterval" class="headerlink" title="# series.pointInterval"></a># series.pointInterval</h4><p><code>型別: Number</code> <code>預設: 1</code></p><p>這個屬性設定的是你數據列中每個數據點之間相隔多少Ｘ軸數值。如果不太理解這兩個屬性的話，可以看看我準備的 <strong><a href="https://codepen.io/max-lee/pen/XWdqNmR" target="_blank" rel="noopener">範例</a></strong>。</p><br/><br/><blockquote><p>只要數據點本身沒有指定的Ｘ軸數值就很適合用這種設定方式，缺點是這種設定方式不能對數據點進行額外的屬性設定，所以要是希望各別數據點能有不一樣的外觀或特性的話，就不太適用了。</p></blockquote><p><span class="emoji" alias="exclamation" style="" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2757.png?v8">&#x2757;</span> <strong>提醒：</strong>圓餅圖的數據點雖然也可以用這個方式法設定，但會缺失數據點名稱。</p><hr><h2 id="數據點設定-陣列設定法"><a href="#數據點設定-陣列設定法" class="headerlink" title="數據點設定 - 陣列設定法"></a>數據點設定 - 陣列設定法</h2><br/><pre><code class="javascript">series: [{  // 數據點設定-陣列型別[Number,Number]  data: [[0, 5], [3, 5], [6, 12]]}]</code></pre><p>若以陣列來設定數據點的話，這個陣列就必須要有兩個型別為「數字」的值，其一會被 Highcharts 解析為數據點的Ｘ軸數值，其二為Ｙ軸數值。</p><blockquote><p>如果數據點需要有指定Ｘ數值的話，就必須採用這個設定方式，例如散佈圖或是加速度圖這種類的圖表，不過缺點依然是無法對數據點進行額外的屬性設定。</p></blockquote><br/><br/><pre><code class="javascript">series: [{  // 數據點設定-陣列型別[String,Number]  data: [[&quot;數據點1&quot;, 5], [&quot;數據點3&quot;, 5], [&quot;數據點3&quot;, 12]] }]</code></pre><p>或是你也可以將第一個值改為字串，這樣 Highcharts 就會把第一個值解析為該數據點的名稱，而第二個值依然是Ｙ軸數值。</p><blockquote><p>這種設定方式雖然和「數值設定法」很像，就只是多了一個名稱的字串而已，但卻是圓餅圖很常用的數據點設定方式。</p></blockquote><hr><h2 id="數據點設定-物件設定法"><a href="#數據點設定-物件設定法" class="headerlink" title="數據點設定 - 物件設定法"></a>數據點設定 - 物件設定法</h2><br/><pre><code class="javascript">series: [{  // 數據點設定-物件型別  data: [    { x:5, y: 5, name: &quot;Point1&quot; },    { x:8, y: 8, name: &quot;Point2&quot; }  ] }]</code></pre><p>如果以物件型別來設定數據點，那靈活性就非常高了，因為每個數據點（物件）內部又有不少屬性可以個別設定，也就代表每個數據點都可以有不同的外觀或特性。</p><p>但其實數據點大部分的屬性在數據列都有，只不過數據列設定是一次改變所有數據點，而數據點設定就單單只是改變它自身，下面的話我們就只介紹數據點才有的屬性，要看全部到話就到 <strong><a href="https://api.highcharts.com/highcharts/series.line.data" target="_blank" rel="noopener">官方文件</a></strong> 吧。</p><br/><br/><h4 id="series-data-x-series-data-y"><a href="#series-data-x-series-data-y" class="headerlink" title="# series.data.x / series.data.y"></a># series.data.x / series.data.y</h4><p><code>型別: Number</code> <code>預設: undefined</code></p><p><strong>特別注意，這裡的Ｘ和Ｙ不再是調整偏移量了，它們設定的是數據點的Ｘ軸數值以及Ｙ軸數值。</strong></p><p>Ｘ軸數值並非必要屬性是可以省略的，甚至某些圖表也不會有 <code>x</code> 屬性（如圓餅圖），但Ｙ軸數值就是必須的了，如果沒設定就等同沒有數據，沒有數據就畫不出數據點。</p><br/><br/><h4 id="series-data-name"><a href="#series-data-name" class="headerlink" title="# series.data.name"></a># series.data.name</h4><p><code>型別: String</code> <code>預設: undefined</code></p><p>這個屬性可以對數據點設定名稱，如果有設定的話提示框還會以名稱來取代Ｘ軸刻度標籤，另外這個屬性對圓餅圖來說也很重要，因為圓餅圖的圖例、數據標籤顯示的都是「數據點名稱」，而非數據列名稱或數值。</p><br/><br/><h4 id="series-data-className"><a href="#series-data-className" class="headerlink" title="# series.data.className"></a># series.data.className</h4><p><code>型別: String</code> <code>預設: undefined</code></p><p>顧名思義，這個屬性是用來增加數據點在 HTML 中的 Class Attribute 的，好處是我們可以更針對性地選取到某個數據點，可以方便日後進行圖表互動。</p><br/><br/><h4 id="series-data-legendIndex"><a href="#series-data-legendIndex" class="headerlink" title="# series.data.legendIndex"></a># series.data.legendIndex</h4><p><code>型別: Number</code> <code>預設: undefined</code></p><p>前面有說圓餅圖的圖例顯示的是「數據點名稱」，而這個屬性就是讓圓餅圖數據點可以調整圖例順序的，用法和 <code>series.legendIndex</code> 一樣。</p><br/><br/><h4 id="series-data-sliced"><a href="#series-data-sliced" class="headerlink" title="# series.data.sliced"></a># series.data.sliced</h4><p><code>型別: Boolean</code> <code>預設: undefined</code></p><p>這個屬性也是圓餅圖的數據點才有，讓你可以決定某塊扇形是否要向外突出。而突出的偏移量你可以用數據列的 <code>series.slicedOffset</code> 屬性來調整。</p><img src="sliced.png" style="max-width: 600px; margin: 12px auto;" alt="特別突顯25-29歲" /><blockquote><p>物件設定法適用於所有圖表類型，而且非常適合各數據點差異性大的情況。</p></blockquote><hr><h2 id="數據點設定-混合"><a href="#數據點設定-混合" class="headerlink" title="數據點設定 - 混合"></a>數據點設定 - 混合</h2><br/><pre><code class="javascript">series: [{  data: [[0, 5, {y: 3, name: &quot;數據點&quot;}, 5]] // 數字混物件}]</code></pre><pre><code class="javascript">series: [{  data: [[0, 5], {x: 3, y: 5, name: &quot;數據點&quot;}, [6, 12]] // 陣列混物件}]</code></pre><p>是的沒錯，以上這三種設定法還可以混用，讓你的數據點設定更加彈性輕鬆，不過數字搭陣列的效果不是很優，所以大部分都是用物件去搭配另外兩種。</p><blockquote><p>這種混和的設定方法，很適合用在你想要為某幾個特定的數據點進行額外設定時使用。</p></blockquote><hr><h2 id="數據點設定-陣列搭配Keys設定法"><a href="#數據點設定-陣列搭配Keys設定法" class="headerlink" title="數據點設定 - 陣列搭配Keys設定法"></a>數據點設定 - 陣列搭配Keys設定法</h2><br/><pre><code class="javascript">series: [{  keys: [&quot;y&quot;, &quot;name&quot;, &quot;className&quot;],  data: [    [13, &quot;數據點一&quot;, &quot;point-1&quot;],    [21, &quot;數據點二&quot;, &quot;point-2&quot;]  ]}]</code></pre><p>這種設定方式比較特別，它和陣列設定法一樣是以陣列設定數據點，但卻能放進不只兩個項目，而且沒有順序的限制。不過這樣的彈性，使得 Highcharts 不知道如何解析陣列裡的數值，此時就需要借助 <code>keys</code> 的幫忙。</p><br/><h4 id="series-keys"><a href="#series-keys" class="headerlink" title="# series.keys"></a># series.keys</h4><p><code>型別: Array[String]</code> <code>預設: undefined</code> </p><p>這個屬性融合了陣列設定法與物件設定法，讓你能用陣列設定數據點卻又可以加入額外屬性，而使用方式是提供 <code>keys</code> 一組陣列，陣列項目為想設定的<strong>數據點屬性名稱</strong>，接下來你只要按這個陣列的順序來設定數據點，Highcharts 就會以這個順序去解析你的 <code>data</code> 項目。</p><br/><blockquote><p>如果你想調整的數據點屬性僅僅只有一兩個，那就很適合使用這種設定方式，不用像物件法一樣搞得很冗長，卻又能設定少量的額外屬性。</p></blockquote><p><br/><br/></p><p>恭喜各位，我們已經把最重要的數據列與數據點介紹完了，雖然後面還有一部分的設定技巧和屬性，但基本上到這裡你就可以很順利的將 Highcharts 導入專案中了，那明天我們要介紹的是「繪圖區」，雖然它是圖表中占比不小的元素區塊，但它其實不僅沒有額外屬性，還能為我們省很多事。</p><hr><p>- 此篇文章為「iT邦幫忙鐵人賽」參賽文章，同步發表於 <a href="https://ithelp.ithome.com.tw/articles/10243702" target="_blank" rel="noopener">iT邦幫忙</a> -</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本章節範例：&lt;strong&gt;&lt;a href=&quot;https://codepen.io/max-lee/pen/rNevgYm&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;https://codepen.io/max-lee/pen
      
    
    </summary>
    
    
    
      <category term="JavaScript" scheme="https://maxleebk.com/tags/JavaScript/"/>
    
      <category term="Highcharts" scheme="https://maxleebk.com/tags/Highcharts/"/>
    
      <category term="12th鐵人賽" scheme="https://maxleebk.com/tags/12th%E9%90%B5%E4%BA%BA%E8%B3%BD/"/>
    
  </entry>
  
</feed>
